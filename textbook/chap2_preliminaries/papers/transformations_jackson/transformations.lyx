#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass paper
\begin_preamble
\usepackage{cancel}
\usepackage{algorithmic}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{hyperref}
\usepackage{url}
\end_preamble
\use_default_options true
\begin_modules
theorems-ams
eqs-within-sections
figs-within-sections
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 2
\tocdepth 2
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Transformations for Dummies:
\begin_inset Newline newline
\end_inset

A tutorial on commonly-used Lie groups in Robotics and Computer Vision
\end_layout

\begin_layout Author
James Jackson
\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\v}{\mathbf{v}}
{\mathbf{v}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\u}{\mathbf{u}}
{\mathbf{u}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\a}{\mathbf{a}}
{\mathbf{a}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\b}{\mathbf{b}}
{\mathbf{b}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\c}{\mathbf{c}}
{\mathbf{c}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\w}{\boldsymbol{\omega}}
{\boldsymbol{\omega}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\p}{\mathbf{p}}
{\mathbf{p}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\t}{\mathbf{t}}
{\mathbf{t}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\i}{\mathbf{i}}
{\mathbf{i}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\j}{\mathbf{j}}
{\mathbf{j}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\e}{\mathbf{e}}
{\mathbf{e}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\k}{\mathbf{k}}
{\mathbf{k}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\r}{\mathbf{r}}
{\mathbf{r}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\d}{\mathbf{d}}
{\mathbf{d}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\x}{\mathbf{x}}
{\mathbf{x}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\y}{\mathbf{y}}
{\mathbf{\mathbf{y}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\q}{\mathbf{q}}
{\mathbf{q}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\qq}{\Gamma}
{\Gamma}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\qr}{\q_{r}}
{\q_{r}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\qd}{\q_{d}}
{\q_{d}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\SO}{\mathit{SO}}
{\mathit{SO}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\SE}{\mathit{SE}}
{\mathit{SE}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\skew}[1]{\left\lfloor #1\right\rfloor _{\times}}
{\left\lfloor #1\right\rfloor _{\times}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\norm}[1]{\left\Vert #1\right\Vert }
{\left\Vert #1\right\Vert }
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\grey}[1]{\textcolor{gray}{#1}}
{\textcolor{gray}{#1}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\abs}[1]{\left|#1\right|}
{\left|#1\right|}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\S}{\mathcal{S}}
{\mathcal{S}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\dd}{\boldsymbol{\delta}}
{\boldsymbol{\delta}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\Ad}{\textrm{Ad}}
{\mathcal{\textrm{Ad}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\SU}{\mathit{SU}}
{\mathit{SU}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\R}{\mathbb{R}}
{\mathbb{R}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\so}{\mathfrak{so}}
{\mathfrak{so}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\se}{\mathfrak{se}}
{\mathfrak{se}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\su}{\mathfrak{su}}
{\mathfrak{su}}
\end_inset


\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
This document motivates and derives many commonly-used formulae used when
 performing coordinate transformations in robotics and computer vision.
 There are a number of great resources on this topic 
\begin_inset CommandInset citation
LatexCommand cite
key "Barfoot2019,Drummond2014,Ethan2019,Sola2019,schwichtenberg_2015"
literal "false"

\end_inset

, and I do not pretend to be adding anything particularly novel to the field
 of knowledge in this area.
 However, this has personally been a source of great confusion to me over
 the years and I wanted to derive these concepts from basics, highlighting
 the gotchas that I have encountered along the way.
 I hope that this ends up being useful to people new to the field of robotics
 or computer vision.
 
\end_layout

\begin_layout Standard
As many of my fellow graduate students and I used to say, 
\begin_inset Quotes eld
\end_inset

The two hardest problems in robotics are coordinate frames and naming things.
\begin_inset Quotes erd
\end_inset

 While this won't help you much with the second problem, this will hopefully
 help dispel a lot of the confusion I encountered at first.
\end_layout

\begin_layout Standard
One difference with this document when compared with others is the use of
 extra notation throughout.
 This notation is much more verbose than a lot of other literature on robotics
 or computer vision, but the extra syntax clarifies what is going on, and
 makes it easier for someone like me (who likes to think of these ideas
 in terms of physical relationships, rather than abstract mathematical ideas)
 to visualize and understand what is going on.
 The extra notation has also allowed me to make distinctions between different
 fields of research that may have different conventions when it comes to
 transformations.
\end_layout

\begin_layout Section
Vectors
\end_layout

\begin_layout Standard
Let us first describe the notation used in the rest of the document.
 Succinctly, this is described as follows:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\r_{a/b}^{c} & \textrm{\ensuremath{\quad}the vector \ensuremath{\r}, representing some quantity (e.g. position) of point \ensuremath{a} with respect to }\\
 & \quad\text{point \ensuremath{b}, expressed in frame \ensuremath{c}.}\\
R_{a}^{b} & \quad\text{a transformation or rotation that executes a change of \text{basis from frame \ensuremath{a} to frame \ensuremath{b}}}\\
\skew{\v} & \quad\text{The skew-symmetric matrix formed from \v}
\end{align*}

\end_inset


\end_layout

\begin_layout Subsection
Vector Notation
\end_layout

\begin_layout Standard
If that's all you need, then great! You can carry on to the next section.
 However, for people like me, let's dig into this notation and (hopefully)
 let it sink in.
 Consider the illustration in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:notation"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 We have some point 
\begin_inset Formula $a$
\end_inset

 and another point 
\begin_inset Formula $b$
\end_inset

.
 Let 
\begin_inset Formula $\r_{a/b}$
\end_inset

 be the vector which describes the position of 
\begin_inset Formula $b$
\end_inset

 with respect to 
\begin_inset Formula $a$
\end_inset

.
 Note that we could flip the vector around by negating the quantity, which
 means that for any arbitrary frame of reference
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\r_{b/a}=-\r_{a/b}.
\]

\end_inset


\begin_inset Float figure
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/frame.svg
	width 50col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Illustration of a vector with notation
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:notation"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Although it may be sometimes hard to actually draw some quantities clearly
 (like the angular rate of two coordinate frames), in engineering, we typically
 define vectors as some quantity with respect to some other reference.
 For example, the angular velocity of a rotating body with respect to the
 earth might be written as 
\begin_inset Formula $\w_{b/E}$
\end_inset

.
 While it may be difficult to visualize, we could also consider the opposite
 case, what the angular velocity of the earth was with respect to the rotating
 body, 
\begin_inset Formula $\w_{E/b}$
\end_inset

.
 (This can be a fun mind bender, turning frames of reference around in your
 head).
 It turns out that even in this case, the 
\begin_inset Quotes eld
\end_inset

earth-centric
\begin_inset Quotes erd
\end_inset

 representation is just the negative of the 
\begin_inset Quotes eld
\end_inset

body-centric
\begin_inset Quotes erd
\end_inset

 representation.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\w_{E/b}=-\w_{b/E}.
\]

\end_inset


\end_layout

\begin_layout Standard
The next piece of information that we need is the frame of reference it
 is described in (its basis).
 For example, in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:notation"
plural "false"
caps "false"
noprefix "false"

\end_inset

, we could describe 
\begin_inset Formula $\r$
\end_inset

 in any coordinate frame we want.
 We could use frame 
\begin_inset Formula $a$
\end_inset

, 
\begin_inset Formula $b$
\end_inset

 or 
\begin_inset Formula $c$
\end_inset

, it doesn't really matter, so long as we always do all operations between
 vectors represented in the same frame.
\end_layout

\begin_layout Standard
We will use the superscript notation to describe the frame of reference,
 as in
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\r_{a/b}^{c}.
\]

\end_inset

Which in words means 
\begin_inset Quotes eld
\end_inset

the position of point 
\begin_inset Formula $a$
\end_inset

 with respect to point 
\begin_inset Formula $b$
\end_inset

, expressed in frame 
\begin_inset Formula $c$
\end_inset

.
\begin_inset Quotes erd
\end_inset

 All vectors have this concept of frame of reference, even if they are hard
 to visualize, like angular rate, acceleration, etc...
\end_layout

\begin_layout Subsection
Rotating Vectors
\end_layout

\begin_layout Standard
I'm going to jump ahead a little bit and introduce the concept of a rotation
 as a change of basis.
 Let us say that we have some version of 
\begin_inset Formula $\r$
\end_inset

 expressed in the 
\begin_inset Formula $c$
\end_inset

 frame, but we want to express it in the 
\begin_inset Formula $b$
\end_inset

 frame.
 How do we do that? Easy, we simply change the basis.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\r_{a/b}^{b}=R_{c}^{b}\mathbf{r}_{a/b}^{c}
\]

\end_inset


\end_layout

\begin_layout Standard
I will get into the details of how this actually works a little later, but
 for now, just believe me that we can change this basis.
 The notation is such that you can 
\begin_inset Quotes eld
\end_inset

cancel out
\begin_inset Quotes erd
\end_inset

 the frames, as in
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\r_{a/b}^{b}=R_{\cancel{c}}^{b}\mathbf{r}_{a/b}^{\cancel{c}}.
\]

\end_inset

So what if I want to go all the way to frame 
\begin_inset Formula $a$
\end_inset

 but I only have rotations from 
\begin_inset Formula $c\to b$
\end_inset


\series bold
 
\series default
and 
\begin_inset Formula $b\to a$
\end_inset

? Easy peasy, just compose the rotations, and everything cancels out.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\mathbf{r}_{a/b}^{a}=R_{\cancel{b}}^{a}R_{\cancel{c}}^{\cancel{b}}\r_{a/b}^{\cancel{c}}.
\]

\end_inset

Again, I'm deliberately skimming over most of the actual math.
 We'll get into this a lot more later, but we first need to get the mechanics
 of working with this notation.
\end_layout

\begin_layout Subsection
Composing Vectors
\end_layout

\begin_layout Standard
Let's now take a minute to remember what defines a vector space.
 From Wikipedia:
\end_layout

\begin_layout Quote
A vector space is a collection of objects called vectors, which may be added
 together and multiplied ("scaled") by numbers, called scalars.
\end_layout

\begin_layout Standard
All vector spaces abide by the following rules:
\end_layout

\begin_layout Standard
\align center
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Table of the rules of a Vector Space
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="4cm">
<column alignment="center" valignment="top" width="6cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Axiom
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Meaning
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Associativity
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\a+\left(\b+\c\right)=\left(\a+\b\right)+\c$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Commutativity
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\a+\b=\b+\a$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Identity of addition
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
There exists an element 
\begin_inset Formula $\boldsymbol{0}$
\end_inset

 such that 
\begin_inset Formula $\a+\boldsymbol{0}=\text{\a}$
\end_inset

 for every vector in the space
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Inverse element of addition
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
for every vector 
\begin_inset Formula $\a$
\end_inset

 in the space, there is one and only one vector 
\begin_inset Formula $-\a$
\end_inset

 such that 
\begin_inset Formula $\a+\left(-\a\right)=\boldsymbol{0}.$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
distributivity of scalar multiplication
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\left(v+u\right)\a=v\a+u\a$
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Formula $v\left(\a+\b\right)=v\a+v\b$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Identity element of scalar multiplication
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $1\a=\a$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\align left
If you've taken a course in linear algebra, these will not be new to you.
 However, for me, up to this point, I had never worked with objects that
 were 
\emph on
not 
\emph default
in a vector space, so the rules seemed obvious and redundant.
\end_layout

\begin_layout Standard
We like vector spaces because computers are well-suited for solving linear
 algebra problems.
 There are high-performance BLAS libraries (basic linear algebra subprograms)
 and methods for performing matrix decompositions (SVD, LU, QR, Cholesky
 etc...) that allow us to solve complicated problems quickly and accurately.
 
\end_layout

\begin_layout Standard
It turns out that rotations and transformations do 
\emph on
not
\emph default
 lie in a vector space.
 This means that we end up performing manipulations to get our problems
 into a vector space where we can use powerful linear algebra techniques,
 and the distinction between vector spaces and non-vector spaces will become
 very important.
\end_layout

\begin_layout Standard
Let us say we have three points, each with an associated coordinate frame
 
\begin_inset Formula $a$
\end_inset

, 
\begin_inset Formula $b$
\end_inset

, and 
\begin_inset Formula $c$
\end_inset

, as shown in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:vector_compose"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Let's also say that we have only the orange vectors.
 (the vector from 
\begin_inset Formula $b\to a$
\end_inset

 and the vector from 
\begin_inset Formula $c\to b$
\end_inset

) but we want the green vector (the one that goes all the way from 
\begin_inset Formula $c\to a$
\end_inset

).
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/vector_composition.svg
	width 50col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Illustration of a vector triangle
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:vector_compose"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Well, this would be easy if they were all represented in the same coordinate
 frame
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\r_{a/c}=\r_{a/b}+\r_{b/c},
\]

\end_inset

but they aren't.
 However, we just have to remember that vectors can only be added or subtracted
 if they are in the same frame, so we just rotate them into a common frame
 before doing the additions, like this:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\r_{a/c}^{c}=R_{b}^{c}\left(\r_{b/c}^{b}+R_{a}^{b}\r_{a/b}^{a}\right).
\]

\end_inset

From a theoretical perspective, the choice of coordinate frame doesn't matter,
 however in practice there is often a choice of frame that makes things
 easier.
\end_layout

\begin_layout Subsection
Skew-symmetric matrices
\end_layout

\begin_layout Standard
Before going much further, I also need to introduce skew-symmetric matrices.
 This
\begin_inset Foot
status open

\begin_layout Plain Layout
There are a variety of symbols used to communicate this operation.
 
\begin_inset Formula $\v_{\times}$
\end_inset

 and 
\begin_inset Formula $\left(\v\right)^{\times}$
\end_inset

 are also commonly used.
\end_layout

\end_inset

 is the skew-symmetric matrix operator 
\begin_inset Formula $\skew{\v}$
\end_inset

.
 It is defined as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\skew{\v}=\left[\begin{array}{ccc}
0 & -\v_{z} & \v_{y}\\
\v_{z} & 0 & -\v_{x}\\
-\v_{y} & \v_{x} & 0
\end{array}\right],
\]

\end_inset

and is related to taking the cross-product between two vectors as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\a\times\b=\skew{\a}\b.
\]

\end_inset


\end_layout

\begin_layout Standard
The skew-symmetric matrix has some really interesting and helpful properties.
 The first is that the operator is anti-commutable, that is
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\skew{\a}\b=-\skew{\b}\a.\label{eq:skew_trick_1}
\end{equation}

\end_inset

The second is that rotation matrices can be moved in and out of the skew-symmetr
ic operator with
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\skew{R\v}=R\skew{\v}R^{-1}.\label{eq:skew_trick_2}
\end{equation}

\end_inset

Finally, you could probably see from inspection that the transpose of a
 skew-symmetric matrix is its negative
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\left\lfloor \v\right\rfloor _{\times}^{\top}=-\skew{\v}.
\]

\end_inset

These are all super useful tricks that show up all the time.
 I'll try to point out when I'm using one of these tricks, but I might miss
 some.
\end_layout

\begin_layout Section
A Look at the Matrix Exponential
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:mat_exp"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:matrix_exp_intro"

\end_inset


\end_layout

\begin_layout Standard
The matrix exponential is central to the rest of this document.
 In this section, we are going to take a deeper look at the matrix exponential
 to gain some intuition about what it's doing.
 If we can understand what the exponential really means, then the reason
 we use it so often in Lie Group theory will become obvious.
\end_layout

\begin_layout Standard
Let's start with the scalar, first-order differential equation
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\dot{x}=ax.\label{eq:first-order-diff_eq}
\end{equation}

\end_inset

This equation has the simple solution,
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x\left(t\right)=x\left(t_{0}\right)e^{at},
\]

\end_inset

the derivation of which is a central part of any undergraduate differential
 equations class.
 However, let us for a moment pretend that we don't know about the natural
 number 
\begin_inset Formula $e$
\end_inset

, but we were tasked with solving Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:first-order-diff_eq"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 To make things more concrete, we could stand in the shoes of Jacob Bernoulli
 as he studies the following problem:
\end_layout

\begin_layout Quote
An account starts with $1.00 and pays 100 percent interest per year.
 If the interest is credited once, at the end of the year, the value of
 the account at year-end will be $2.00.
 What happens if the interest is computed and credited more frequently during
 the year? 
\end_layout

\begin_layout Standard
This problem is formulated as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\$1.00\times\left(1+\frac{1}{n}\right)^{n},
\]

\end_inset

 where 
\begin_inset Formula $n$
\end_inset

 is the number of intervals.
\end_layout

\begin_layout Standard
Jacob Bernoulli noticed that this series converges to what we now know as
 
\begin_inset Formula $e$
\end_inset

, the natural number, as 
\begin_inset Formula $n\to\infty$
\end_inset

.
\end_layout

\begin_layout Standard
So what is going on here? The main factor at play is that the amount of
 interest that the banker pays to the account depends on how much money
 is 
\emph on
already in
\emph default
 the account.
 It just so happens that this form of problem, where the derivative of some
 state is directly proportional to its current value has this really nice
 form that depends on the limit to this infinite series.
\end_layout

\begin_layout Standard
To bring this concept to a robotic application, let's consider two-dimensional
 transforms.
 Let's say we have a unicycle robot
\begin_inset Foot
status open

\begin_layout Plain Layout
This is a standard model in robotics for studying non-holonomic controls
 and consists of a planar robot that can only drive forward and turn.
 This model is also known as Dubin's car.
\end_layout

\end_inset

 with inputs linear velocity 
\begin_inset Formula $v$
\end_inset

 and angular velocity 
\begin_inset Formula $\omega$
\end_inset

.
 The dynamics of this system are given as 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\begin{pmatrix}\dot{x}\\
\dot{y}\\
\dot{\theta}
\end{pmatrix}=\begin{pmatrix}v\sin\left(\theta\right)\\
v\cos\left(\theta\right)\\
\omega
\end{pmatrix}.\label{eq:dubins_car}
\end{equation}

\end_inset

Let's say that given a constant velocity and angular rate command, we want
 to know where this robot is after one second.
 How should we solve this? Well, one straight-forward way is with good ol'
 Euler integration
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\x\left[t+\delta t\right]=\x\left[t\right]+\delta t\dot{\x}\left[t\right].
\]

\end_inset

If we do this, we should get something like what is shown in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:EulerIntegration"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 In each trajectory, I have integrated the same amount of time, but with
 smaller and smaller time steps.
 If we think about what is happening from the point of view of the robot,
 we could imagine that for each 
\begin_inset Formula $\delta t,$
\end_inset

 we drive forward at some velocity, and then turn.
 We then repeat this, over and over until we reach the end of the interval.
 In Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:EulerIntegration"
plural "false"
caps "false"
noprefix "false"

\end_inset

 we can see that as our 
\begin_inset Formula $\delta t$
\end_inset

's get smaller, we seem to be approaching some ideal situation, where we
 are no longer separating the 
\begin_inset Quotes eld
\end_inset

drive forward
\begin_inset Quotes erd
\end_inset

 step from the 
\begin_inset Quotes eld
\end_inset

turn
\begin_inset Quotes erd
\end_inset

 step.
 They are happening simultaneously, and we are getting that natural curving
 motion that we intuitively expect.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/forward_integration.svg
	width 75text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Illustration of simple forward-mode numerical integration of a unicyle robot
 with different sized steps.
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:EulerIntegration"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
This is exactly the same situation as the compounding interest problem discussed
 earlier, and we can set up our problem in such a way that the matrix exponentia
l solves it for us.
 The matrix exponential, similar to the scalar exponential, is defined by
 the infinite series
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\exp\left(A\right)=\sum_{k=0}^{\infty}\frac{1}{k!}A^{k}.\label{eq:mat_exp_inf}
\end{equation}

\end_inset

We will see in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:matrix_exp_closed_form"
plural "false"
caps "false"
noprefix "false"

\end_inset

 that for many useful situations, this expression has a closed form.
 To solve Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:dubins_car"
plural "false"
caps "false"
noprefix "false"

\end_inset

, with the matrix exponential we first need to convert the system into the
 matrix differential equation
\begin_inset Foot
status open

\begin_layout Plain Layout
This is an example of 
\begin_inset Formula $\SE\left(2\right),$
\end_inset

 the special euclidean group with two dimensions.
 The top left 
\begin_inset Formula $2\times2$
\end_inset

 block is the planar rotation matrix
\end_layout

\end_inset


\begin_inset Formula 
\[
\dot{\overbrace{\begin{bmatrix}\cos\left(\theta\right) & \sin\left(\theta\right) & x\\
-\sin\left(\theta\right) & \cos\left(\theta\right) & y\\
0 & 0 & 1
\end{bmatrix}}}=\begin{bmatrix}\cos\left(\theta\right) & \sin\left(\theta\right) & x_{0}\\
-\sin\left(\theta\right) & \cos\left(\theta\right) & y_{0}\\
0 & 0 & 1
\end{bmatrix}\cdot\begin{bmatrix}0 & -\omega & v\\
\omega & 0 & 0\\
0 & 0 & 0
\end{bmatrix},
\]

\end_inset

Don't be too worried about how this works.
 We will talk about this a lot more later.
 Just know that this is an equivalent expression to 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:dubins_car"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 As soon as we do, the solution is given as
\begin_inset Formula 
\[
\begin{bmatrix}\cos\left(\theta\right) & \sin\left(\theta\right) & x\\
-\sin\left(\theta\right) & \cos\left(\theta\right) & y\\
0 & 0 & 1
\end{bmatrix}\left(t\right)=\begin{bmatrix}\cos\left(\theta_{0}\right) & \sin\left(\theta_{0}\right) & x_{0}\\
-\sin\left(\theta_{0}\right) & \cos\left(\theta_{0}\right) & y_{0}\\
0 & 0 & 1
\end{bmatrix}\cdot\exp\begin{pmatrix}0 & -\omega t & vt\\
\omega t & 0 & 0\\
0 & 0 & 0
\end{pmatrix}.
\]

\end_inset

This is precisely what Lie theory is all about.
 We can use the matrix exponential to map to curvy structures (rotation
 matrices or transformations) from linear systems (vectors) in an efficient
 and principled way.
 Consequently, we can consider concepts of rotation and translation simultaneous
ly and how they interact.
\end_layout

\begin_layout Section
Rotations
\end_layout

\begin_layout Standard
There are a couple of common conventions found in different bodies of modern
 literature when dealing with rotations.
 This section enumerates a number of these conventions the implications,
 of using them and serves as a backdrop for much of the later work.
 It is important to realize that not all bodies of literature consider rotations
 in same way, and even within a single field, different conventions may
 apply depending on the source.
 It's also important to realize that none of these conventions is necessarily
 
\begin_inset Quotes eld
\end_inset

right.
\begin_inset Quotes erd
\end_inset

 (with the exception of Euler angles, which are usually wrong).
 So long as we effectively communicate what we are talking about and apply
 proper methods mathematically, each of these conventions have different
 strengths, which is why they have been adopted differently in different
 fields.
 
\end_layout

\begin_layout Standard
We will deal with both rotation matrices and unit quaternions, although
 I will start with a brief explanation of Euler angles, mainly to argue
 for why you shouldn't be using them.
\end_layout

\begin_layout Subsection
Euler Angles
\end_layout

\begin_layout Standard
Euler angles are often the first method that people are introduced to when
 talking about rotations.
 Euler angles describe rotations about subsequent axes, and there are actually
 several variations on the order of these axes.
 The most common are the 3-2-1 Euler angles, typically referred to yaw,
 pitch and roll angles.
 Despite Euler angles being historically significant, when compared with
 modern methods, they are usually a poor choice for describing a rotation.
 Euler angles do not form a vector space
\begin_inset Foot
status open

\begin_layout Plain Layout
Euler angles do not follow the rules of associativity, commutativity (if
 you roll first, then pitch, you get a different rotation than if you first
 pitched, then rolled) or scalar multiplication (what would it mean to just
 
\begin_inset Quotes eld
\end_inset

double
\begin_inset Quotes erd
\end_inset

 all my euler angles?)
\end_layout

\end_inset

, they are numerically unstable in many real-life situations, and they are
 computationally inefficient.
 However, Euler angles are often the most intuitive for human consumption,
 so a common workflow is to convert from rotation matrices or quaternions
 to Euler angles for debugging problems or plotting.
\end_layout

\begin_layout Standard
For reference, I have included the algorithms for converting rotation matrices
 and unit quaternions to Euler angles with 
\begin_inset Formula $\psi$
\end_inset

, 
\begin_inset Formula $\theta$
\end_inset

 
\begin_inset Formula $\phi$
\end_inset

 (referring to yaw, pitch, and roll, respectively).
 Note that in the case that 
\begin_inset Formula $\theta=\nicefrac{\pi}{2},$
\end_inset

 we get infinitely many solutions.
 This is known as gimbal lock, and is a consequence of the fact that for
 increasingly large values of pitch, roll and yaw look more and more alike
 until they are indistinguishable.
 While hitting gimbal lock would surely be catastrophic in an Euler-angle
 based system, this problem has real consequences even far from actual lock.
 This is because the representation becomes increasingly non-linear as pitch
 angle grows.
 So even if a system never actually hit gimbal lock, the risk of incurring
 significant linearization error is a quite high for even moderate pitch
 angles.
\end_layout

\begin_layout Standard
Rotation matrices and unit quaternions, while perhaps less intuitive, have
 none of these weaknesses.
 They can be easily cast into a vector space (using their associated Lie
 algebra, which I will talk about later), they are computationally efficient,
 and they are numerically stable...
 everywhere.
 The downside is the intellectual hurdle of jumping into matrix kinematics.
 I hope that this document is able to demystify rotation matrices and unit
 quaternions to the point that they are just as easy to use as Euler angles,
 and that future students don't wade through the problems of Euler angles
 any longer than they have to.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{algorithmic}
\end_layout

\begin_layout Plain Layout


\backslash
IF{$R_{31} 
\backslash
neq 
\backslash
pm 1$}
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
theta 
\backslash
gets -
\backslash
arcsin
\backslash
left(R_{31}
\backslash
right)$
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
psi = 
\backslash
arctan2
\backslash
left(
\backslash
tfrac{R_{32}}{
\backslash
cos
\backslash
theta},
\backslash
,
\backslash
tfrac{R_{33}}{
\backslash
cos
\backslash
theta}
\backslash
right)$
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
phi = 
\backslash
arctan2
\backslash
left(
\backslash
tfrac{R_{21}}{
\backslash
cos
\backslash
theta},
\backslash
,
\backslash
tfrac{R_{11}}{
\backslash
cos
\backslash
theta}
\backslash
right)$
\end_layout

\begin_layout Plain Layout


\backslash
ELSE
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
phi = 
\backslash
textrm{anything; set to 0}$
\end_layout

\begin_layout Plain Layout

	
\backslash
IF {$R_{31} = -1$}
\end_layout

\begin_layout Plain Layout

		
\backslash
STATE $
\backslash
theta 
\backslash
gets 
\backslash
tfrac{
\backslash
pi}{2}$
\end_layout

\begin_layout Plain Layout

		
\backslash
STATE $
\backslash
psi = 
\backslash
phi + 
\backslash
arctan2
\backslash
left(R_{12}, R_{13}
\backslash
right)$
\end_layout

\begin_layout Plain Layout

	
\backslash
ELSE
\end_layout

\begin_layout Plain Layout

		
\backslash
STATE $
\backslash
phi = -
\backslash
tfrac{
\backslash
pi}{2}$
\end_layout

\begin_layout Plain Layout

		
\backslash
STATE $
\backslash
psi = -
\backslash
phi + 
\backslash
arctan2
\backslash
left(-R_{12}, -R_{13}
\backslash
right)$
\end_layout

\begin_layout Plain Layout

	
\backslash
ENDIF
\end_layout

\begin_layout Plain Layout


\backslash
ENDIF
\end_layout

\begin_layout Plain Layout


\backslash
end{algorithmic}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Computing Euler angles from a Rotation Matrix
\begin_inset CommandInset citation
LatexCommand cite
key "Slabaugh2019"
literal "false"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{algorithmic}
\end_layout

\begin_layout Plain Layout


\backslash
STATE $s 
\backslash
gets 2
\backslash
left(q_0 q_y - q_x q_z
\backslash
right)$
\end_layout

\begin_layout Plain Layout


\backslash
IF{$
\backslash
abs{s} > 1.0$}
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
theta 
\backslash
gets 
\backslash
textrm{sign}
\backslash
left(s
\backslash
right) 
\backslash
tfrac{
\backslash
pi}{2}$
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
phi 
\backslash
gets 
\backslash
textrm{anything; set to 0}$
\end_layout

\begin_layout Plain Layout


\backslash
ELSE
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
theta 
\backslash
gets 
\backslash
arcsin{s}$
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
phi 
\backslash
gets 
\backslash
arctan2
\backslash
left(2
\backslash
left(q_0 q_z + q_x q_y
\backslash
right),
\backslash
,1-2
\backslash
left(q_y^2 + q_z^2
\backslash
right)
\backslash
right)$
\end_layout

\begin_layout Plain Layout


\backslash
ENDIF
\end_layout

\begin_layout Plain Layout


\backslash
STATE$
\backslash
psi 
\backslash
gets 
\backslash
arctan2
\backslash
left(2
\backslash
left(q_0 q_z + q_x q_y
\backslash
right),
\backslash
, 1-2
\backslash
left(q_y^2 + q_z^2
\backslash
right)
\backslash
right)$
\end_layout

\begin_layout Plain Layout


\backslash
end{algorithmic}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Computing Euler angles from a Unit Quaternion
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Rotation Matrices
\end_layout

\begin_layout Standard
A rotation matrix is a member of the special orthogonal group 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

.
 This is the set of real 
\begin_inset Formula $3\times3$
\end_inset

 matrices with determinant 
\begin_inset Formula $1$
\end_inset

.
 Another way of saying this, which may be a bit more intuitive, is that
 the vectors making up each row and column are orthogonal to one another,
 have unit length, and follow the right-hand rule
\begin_inset Foot
status open

\begin_layout Plain Layout
This just means that if you take the 
\begin_inset Formula $x$
\end_inset

 vector cross the 
\begin_inset Formula $y$
\end_inset

 vector, you get the 
\begin_inset Formula $z$
\end_inset

 vector.
 This comes from the constraint that 
\begin_inset Formula $\det\left(A\right)=1.$
\end_inset

 A matrix whose columns followed the left-hand rule would have a determinant
 -1
\end_layout

\end_inset

.
 These vectors form the primary 
\begin_inset Formula $x,y,z$
\end_inset

 axis of a Cartesian coordinate frame.
 
\end_layout

\begin_layout Standard
The columns of 
\begin_inset Formula $R_{a}^{b}$
\end_inset

 contain the 
\begin_inset Formula $x,y,z$
\end_inset

 vectors of the 
\begin_inset Formula $b$
\end_inset

 frame, expressed in the 
\begin_inset Formula $a$
\end_inset

 frame, while the rows of the matrix contain the basis vectors of the 
\begin_inset Formula $a$
\end_inset

 frame, expressed in the 
\begin_inset Formula $b$
\end_inset

 frame.
 This makes this matrix the perfect translator between 
\begin_inset Formula $a$
\end_inset

 space and 
\begin_inset Formula $b$
\end_inset

 space because it directly encodes the change of basis from one coordinate
 frame to another.
 This gives rise to the definition given earlier:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\r^{b}=R_{a}^{b}\r^{a},\label{eq:rot_formula}
\end{equation}

\end_inset

and the fact that rotation matrices compound from right to left, as in
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R_{a}^{c}=R_{b}^{c}R_{a}^{b}.
\]

\end_inset


\end_layout

\begin_layout Subsection
Passive Versus Active Rotations
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/rotation_passive.svg
	width 25col%

\end_inset


\begin_inset Graphics
	filename images/rotation_active.svg
	width 25text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Illustration of a passive rotation (left) and an active rotation (right)
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:passive_rotation"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
We are using a convention here, where we define 
\begin_inset Formula $R$
\end_inset

 as a 
\emph on
passive
\emph default
 rotation.
 Consider Equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:rot_formula"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The vector quantity 
\begin_inset Formula $\r$
\end_inset

 did not change during this rotation, it is simply being expressed from
 another point of view.
 Some literature defines rotations as 
\emph on
active
\emph default
.
 Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:passive_rotation"
plural "false"
caps "false"
noprefix "false"

\end_inset

 illustrates the difference between active and passive rotations.
 In the passive case (left), the point 
\begin_inset Formula $p$
\end_inset

 does not change when rotating from frame 
\begin_inset Formula $a$
\end_inset

 to 
\begin_inset Formula $b$
\end_inset

.
 It remains fixed while the perspective changes.
 In contrast to the active case (right), point 
\begin_inset Formula $p$
\end_inset

 is moved to become a new object, point 
\begin_inset Formula $p^{\star}$
\end_inset

.
 This interpretation is much more common in the computer graphics literature,
 where a common operation is to generate some asset at an arbitrary origin,
 and then move that object to be rendered at some other location.
 Engineering and robotics literature typically deal with passive rotations,
 where the goal is often to reason about physical entities that are not
 always directly controlled.
\end_layout

\begin_layout Standard
Confusingly, both kinds of rotations are typically denoted simply as 
\begin_inset Formula $R$
\end_inset

, and readers are expected to infer passive or active convention.
 However, active and passive rotations are actually the transpose of one
 another, as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R_{active}=R_{passive}^{\top}.
\]

\end_inset

This fact makes literature which may use one or the other convention quickly
 accessible to any and all readers who know the rules and make note of the
 choice in convention.
\end_layout

\begin_layout Standard
Readers should also note that our notation is not well-suited for active
 transformations.
 If you try to perform an active rotation in our notation, the coordinate
 frames will not line up, which can be very confusing.
 This is a potential shortcoming of this notation if the desire is to perform
 a lot of active transformations.
\end_layout

\begin_layout Standard
While rotation matrices are probably the most straight-forward method to
 represent rotations, they have some shortcomings.
 The first is that they require 9 parameters to describe 3 degrees of freedom.
 This causes larger memory requirements than strictly necessary, and requires
 more operations than necessary when concatenating matrices With modern
 computing resources, this is less of a problem, however the biggest disadvantag
e is that numerical errors can accumulate in rotation matrices and cause
 unwanted scaling and shearing as the matrix loses orthonormality.
 This error can be corrected by Gram-Schmidt orthogonalization, but doing
 so can be computationally expensive.
 As a result, rotation matrices are still much more efficient than an Euler
 angle representation, but they are not as efficient as unit quaternions.
\end_layout

\begin_layout Subsection
Unit Quaternions
\end_layout

\begin_layout Standard
A quaternion, is a hyper-complex number with four elements, commonly written
\begin_inset Foot
status open

\begin_layout Plain Layout
Sometimes 
\begin_inset Formula $q_{w}$
\end_inset

 is used instead of 
\begin_inset Formula $q_{o}$
\end_inset

.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\q=q_{0}+q_{x}i+q_{y}j+q_{z}k.
\]

\end_inset

Here you can see two additional imaginary numbers, 
\begin_inset Formula $j$
\end_inset

 and 
\begin_inset Formula $k$
\end_inset

.
 These new imaginary numbers follow the following rules
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
i^{2}=j^{2}=k^{2}=ijk=-1,
\]

\end_inset

 as well as the right-hand rule
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
ij=k,\quad ji=-k\quad...
\]

\end_inset

Which gives rise to the definition of quaternion multiplication as
\begin_inset Foot
status open

\begin_layout Plain Layout
To derive this yourself, all you have to do is distribute out the product
 and apply the rules above.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\q^{a}\cdot\q^{b}=\begin{array}{c}
q_{0}^{a}q_{0}^{b}-q_{x}^{a}q_{x}^{b}-q_{y}^{a}q_{y}^{b}-q_{z}^{a}q_{z}^{b}\\
{\displaystyle +\left(q_{0}^{a}q_{x}^{b}+q_{x}^{a}q_{0}^{b}+q_{y}^{a}q_{z}^{b}-q_{z}^{a}q_{y}^{b}\right)i}\\
+\left(q_{0}^{a}q_{y}^{b}-q_{x}^{a}q_{z}^{b}+q_{y}^{a}q_{0}^{b}+q_{z}^{a}q_{x}^{b}\right)j\\
+\left(q_{0}^{a}q_{z}^{b}+q_{x}^{a}q_{y}^{b}-q_{y}^{a}q_{x}^{b}+q_{z}^{a}q_{0}^{b}\right)k.
\end{array}
\]

\end_inset

When representing rotations, quaternions must also satisfy the additional
 constraint that the 
\begin_inset Formula $l_{2}$
\end_inset

 norm of all four elements is equal to 
\begin_inset Formula $1,$
\end_inset

 hence the specification 
\emph on
unit
\emph default
 quaternions, and the use of the group 
\begin_inset Formula $\S^{3}$
\end_inset

, the unit sphere in four dimensions.
\end_layout

\begin_layout Standard
Unit quaternions, unlike rotation matrices, multiply from left to right,
 as in
\begin_inset Foot
status open

\begin_layout Plain Layout
Because of the reverse order of concatenation, there is actually another
 convention for quaternions, first used by NASA JPL, where the quaternion
 imaginary numbers follow the 
\emph on
left-hand
\emph default
 rule instead of the right hand rule.
 This change makes unit quaternions concatenate right-to-left (to match
 rotation matrices).
 The left-handed definition is known as JPL notation, whereas the right-handed
 definition presented here is known as Hamilton notation.
 While this change may seem innocent on the surface, it has huge implications
 when we start talking about Lie Groups.
 Modern scientific literature in robotics and computer vision that use quaternio
ns seem to almost always use Hamilton notation, although JPL is used in
 some early quaternion papers relating to spacecraft attitude observers.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\q_{a}^{c}=\q_{a}^{b}\cdot\q_{b}^{c}.
\]

\end_inset


\end_layout

\begin_layout Standard
For convenience, we will sometimes refer to the complex portion of the quaternio
n as the vector
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\vec{\q}=\left[\begin{array}{ccc}
q_{x} & q_{y} & q_{z}\end{array}\right]
\]

\end_inset

and write quaternions as the tuple of the real and complex portion, as in
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\q=\left(\begin{array}{c}
q_{0}\\
\vec{\q}
\end{array}\right).
\]

\end_inset

This means that the somewhat unwieldy quaternion multiplication expression
 above can be re-written as the matrix-like operation
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\q^{a}\cdot\q^{b}=\left(\begin{array}{cc}
-q_{0}^{a} & \left(-\vec{\q}^{a}\right)^{\top}\\
\vec{\q}^{a} & q_{0}^{a}I+\skew{\vec{\q}^{a}}
\end{array}\right)\left(\begin{array}{c}
q_{0}^{b}\\
\vec{\q}^{b}
\end{array}\right).\label{eq:quat_mult_matrix}
\end{equation}

\end_inset

Splitting the quaternion into a vector and scalar portion also allows us
 to interpret the quaternion in an axis-angle fashion.
 Given a unit vector describing an axis of rotation 
\begin_inset Formula $\r$
\end_inset

 and angle about that axis 
\begin_inset Formula $\theta$
\end_inset

 in radians, the equivalent quaternion is given as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\vec{\q}=\r\sin\left(\frac{\theta}{2}\right),\quad q_{0}=\cos\left(\frac{\theta}{2}\right).\label{eq:quat_axis_angle}
\end{equation}

\end_inset

This axis-angle interpretation makes it somewhat feasible to interpret a
 unit quaternion by just looking at numbers.
 The axis-angle intepretation also makes obvious that inverting a quaternion
 is the same as computing the complex conjugate
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\q^{-1}=\bar{\q}=\begin{pmatrix}q_{0}\\
-\vec{\q}
\end{pmatrix}.
\]

\end_inset


\end_layout

\begin_layout Standard
There is actually another interesting thing about quaternions we can see
 in Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:quat_axis_angle"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 If you think about it, you can actually see that unit quaternions are a
 double cover
\begin_inset Foot
status open

\begin_layout Plain Layout
This just means that for every rotation matrix, there are two unit quaternions.
\end_layout

\end_inset

 of 
\begin_inset Formula $\SO\left(3\right).$
\end_inset

 This is because for each 
\begin_inset Formula $\left(\r,\theta\right)$
\end_inset

, 
\begin_inset Formula $\left(-\r,-\theta\right)$
\end_inset

 describes the same rotation.
 
\end_layout

\begin_layout Standard
Finally, to convert from a quaternion to a rotation matrix, we employ the
 following expression
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R\left(\q\right)=\left(2q_{0}-1\right)I-2q_{0}\skew{\vec{\q}}+2\vec{\q}\vec{\q}^{\top},
\]

\end_inset

and to convert a rotation matrix into its quaternion expression, we can
 use Algorithm 
\begin_inset CommandInset ref
LatexCommand ref
reference "alg.rot2quat"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{algorithmic} 
\end_layout

\begin_layout Plain Layout


\backslash
STATE $
\backslash
delta 
\backslash
gets 
\backslash
mathrm{tr}
\backslash
left(R
\backslash
right)$ 
\end_layout

\begin_layout Plain Layout


\backslash
IF {$
\backslash
delta > 0$}          
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $ s 
\backslash
gets 2
\backslash
sqrt{
\backslash
delta + 1} $ 
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $ 
\backslash
q 
\backslash
gets 
\backslash
tfrac{s}{4} + 
\backslash
tfrac{1}{s}
\backslash
left(R_{23}-R_{32}
\backslash
right)i +
\backslash
tfrac{1}{s}
\backslash
left(R_{31}-R_{13}
\backslash
right)j +
\backslash
tfrac{1}{s}
\backslash
left(R_{12}-R_{21}
\backslash
right)k $
\end_layout

\begin_layout Plain Layout


\backslash
ELSIF{$R_{11}  > R_{22}$ 
\backslash
AND $R_{11} > R{33}$}
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $ s 
\backslash
gets 2
\backslash
sqrt{1 + R_{11} - R_{22} - R_{33}} $
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $ 
\backslash
q 
\backslash
gets 
\backslash
tfrac{1}{s}
\backslash
left(R_{23}-R_{32}
\backslash
right) +
\backslash
tfrac{s}{4}i + 
\backslash
tfrac{1}{s}
\backslash
left(R_{21}+R_{12}
\backslash
right)j + 
\backslash
tfrac{1}{s}
\backslash
left(R_{31}+R_{13}
\backslash
right)k $
\end_layout

\begin_layout Plain Layout


\backslash
ELSIF{$R_{22} > R_33$}
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $s
\backslash
gets 2
\backslash
sqrt{1+R_{22}-R_{11}-R_{33}}$
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
q 
\backslash
gets 
\backslash
tfrac{1}{2}
\backslash
left(R_{31} - R_{13}
\backslash
right) + 
\backslash
tfrac{1}{s}
\backslash
left(R_{21} + R_{12}
\backslash
right)i + 
\backslash
tfrac{s}{4}j + 
\backslash
tfrac{1}{s}
\backslash
left(R_{32}+R_{23}
\backslash
right)k$
\end_layout

\begin_layout Plain Layout


\backslash
ELSE
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $s
\backslash
gets2
\backslash
sqrt{1+R_{33}-R_{11}-R_{22}}$
\end_layout

\begin_layout Plain Layout

	
\backslash
STATE $
\backslash
q 
\backslash
gets 
\backslash
tfrac{1}{s} 
\backslash
left(R_{12} - R_{21}
\backslash
right) + 
\backslash
tfrac{1}{s}
\backslash
left(R_{31}+R_{13}
\backslash
right)i + 
\backslash
tfrac{1}{s}
\backslash
left(R_{32}+R_{13}
\backslash
right)j + 
\backslash
tfrac{s}{4}k$
\end_layout

\begin_layout Plain Layout


\backslash
ENDIF  
\end_layout

\begin_layout Plain Layout


\backslash
end{algorithmic}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Algorithm for converting Rotation matrix to quaternion
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "alg.rot2quat"

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
There are couple of ways to rotate a vector with a quaternion.
 The first, is to compute the rotation matrix from the quaternion and then
 use it to rotate the vector, as in
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\r^{b}=R\left(\q_{a}^{b}\right)\r^{a}.\label{eq:rot_matrix_multipliy}
\end{equation}

\end_inset

This, however, is very inefficient.
 Another way to rotate a vector is with quaternion multiplication.
 We pad the vector with an extra zero in the real component
\begin_inset Foot
status open

\begin_layout Plain Layout
A quaternion with no real component is known as a 
\size normal
\emph on
pure
\emph default
 quaternion.
\end_layout

\end_inset

 and perform pre- and post-multiplication by the quaternion and its complex
 conjugate, as in
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\r^{b}=\left(\q_{a}^{b}\right)^{-1}\cdot\begin{pmatrix}0\\
\r^{a}
\end{pmatrix}\cdot\q_{a}^{b}.\label{eq:quat_rotation}
\end{equation}

\end_inset

While this is more efficient than first computing the rotation matrix and
 then performing the matrix-vector multiplication there is quite a bit of
 redundant effort.
 If you remove this redundant effort, then both Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:quat_rotation"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:rot_matrix_multipliy"
plural "false"
caps "false"
noprefix "false"

\end_inset

 condense into the following expression:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\r^{b} & =\textrm{rot\left(\q_{a}^{b},\r^{a}\right)}\\
 & =\r^{a}+q_{0}\mathbf{t}+\skew{\mathbf{t}}\vec{\q}_{a}^{b},\qquad\mathbf{t}=2\skew{\r^{a}}\vec{\q}_{a}^{b}.
\end{align*}

\end_inset

If implemented efficiently, this method can be just as efficient as the
 matrix-vector multiplication used when rotating a vector with a rotation
 matrix.
\end_layout

\begin_layout Subsection
Relationship between 
\begin_inset Formula $\SU\left(2\right)$
\end_inset

 and Unit Quaternions
\end_layout

\begin_layout Standard
Unit quaternions are isomorphic
\begin_inset Foot
status open

\begin_layout Plain Layout
This means there for every unit quaternion, there is exactly one member
 of 
\begin_inset Formula $\SU\left(2\right)$
\end_inset

.
\end_layout

\end_inset

 to 
\begin_inset Formula $2\times2$
\end_inset

 complex matrices with 
\begin_inset Formula $\det=1$
\end_inset

.
 If we replace the imaginary numbers with the following matrices,
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\mathbf{1} & =\begin{pmatrix}1 & 0\\
0 & 1
\end{pmatrix},\qquad\qquad\i=\begin{pmatrix}0 & 1\\
-1 & 0
\end{pmatrix}\\
\j & =\begin{pmatrix}0 & i\\
i & 0
\end{pmatrix},\qquad\qquad\k=\begin{pmatrix}i & 0\\
0 & -i
\end{pmatrix}
\end{align*}

\end_inset

then we can re-write the quaternion as the following 
\begin_inset Formula $2\times2$
\end_inset

 matrix:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\q & =q_{0}\boldsymbol{1}+q_{x}\i+q_{y}\j+q_{z}\k\\
 & =\begin{pmatrix}q_{0}+q_{z}i & q_{x}+q_{y}i\\
-q_{x}+q_{y}i & q_{0}-q_{z}i
\end{pmatrix}.
\end{align*}

\end_inset

We can see that this representation still follows the original rules for
 the unit quaternion (
\begin_inset Formula $\i\j\k=-\boldsymbol{1}$
\end_inset

), and instead of unit norm, the matrix has unit determinant and we get
 the additional constraint, 
\begin_inset Formula $\q^{\dagger}\q=1$
\end_inset

.
 This means that unit quaternions when written as 
\begin_inset Formula $2\times2$
\end_inset

 matrices fulfill all the conditions of 
\begin_inset Formula $\SU\left(2\right)$
\end_inset

, the special unitary group.
 This will show up again when we talk about Lie groups.
\end_layout

\begin_layout Subsection
Body-Centric vs Inertial Representation
\end_layout

\begin_layout Standard
In robotics or computer vision, we are typically concerned with rotations
 so that we can describe the movement of physical objects.
 When we do this, it turns out that choice of coordinate frame also introduces
 some interesting consequences that may or may not be intentional.
 Rotational dynamics of any arbitrary coordinate frame 
\begin_inset Formula $j$
\end_inset

 with respect to another coordinate frame 
\begin_inset Formula $i$
\end_inset

 is given by
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\dot{R}_{i}^{j}=R_{i}^{j}\skew{\w_{i/j}^{i}}.
\]

\end_inset

However, let's study a concrete example: the dynamics of some rigid body
 undergoing pure rotation.
 If we define some inertial frame 
\begin_inset Formula $I$
\end_inset

 and the moving, body frame as 
\begin_inset Formula $b$
\end_inset

, then the dynamics of the 
\emph on
body-centric
\emph default
 rotation matrix (i.e.
 body
\begin_inset Formula $\to$
\end_inset

inertial), we get 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\dot{R}_{b}^{I}=R_{b}^{I}\skew{\w_{b/I}^{b}},\label{eq:body_rot_dyn}
\end{equation}

\end_inset

and the 
\emph on
inertial
\emph default
 rotation matrix is (inertial
\begin_inset Formula $\to$
\end_inset

body) evolves according to
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\dot{R}_{I}^{b}=R_{I}^{b}\skew{\w_{I/b}^{I}}.\label{eq:inertial_rotation_dynamics}
\end{equation}

\end_inset

This is all fine, except that we typically measure angular velocity in the
 body coordinate frame 
\begin_inset Formula $\w_{b/I}^{b}.$
\end_inset

 Therefore, it is much more convenient to express Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:inertial_rotation_dynamics"
plural "false"
caps "false"
noprefix "false"

\end_inset

 in terms of body angular rates.
 If we do this, then we get
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\dot{R}_{I}^{b} & =R_{I}^{b}\skew{-R_{b}^{I}\w_{b/I}^{b}} & \grey{\text{(Negate and rotate \ensuremath{\w})}}\\
 & =-\skew{\w_{b/I}^{b}}R_{I}^{b}, & \grey{\text{(Eq. \ref{eq:skew_trick_2})}}
\end{align*}

\end_inset

which can also be easily derived as the transpose of Eq 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:body_rot_dyn"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The desire to express our angular rates in terms of the body frame induces
 a similar effect in unit quaternion dynamics, except that it is reversed
 due to the reversed order of concatenation:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\dot{\q}_{I}^{b} & =\frac{1}{2}\q_{I}^{b}\cdot\begin{pmatrix}0\\
\w_{b/I}^{b}
\end{pmatrix}\label{eq:quaternion_dynamics}\\
\dot{\q}_{b}^{I} & =-\frac{1}{2}\begin{pmatrix}0\\
\w_{b/I}^{b}
\end{pmatrix}\cdot\q_{b}^{I}.\nonumber 
\end{align}

\end_inset


\end_layout

\begin_layout Standard
Any advantage to expressing attitude in body-centric vs.
 inertial coordinates will be use-case specific, so both representations
 are used widely in literature.
 Because both representations are often used, however, it can sometimes
 be confusing to compare two works which may be expressing their attitude
 differently, especially if neither work is specific about their representation.
\end_layout

\begin_layout Subsection
Right vs.
 Left Invariance of Rotation Dynamics
\end_layout

\begin_layout Standard
Another non-trivial consequence of differing attitude representations is
 whether the kinematics are left or right-invariant (LI or RI).
 Body-centric rotation kinematics are left-invariant.
 This means that if we have some constant matrix 
\begin_inset Formula $A\in\SO\left(3\right)$
\end_inset

, and we multiply the kinematics (Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:body_rot_dyn"
plural "false"
caps "false"
noprefix "false"

\end_inset

) by 
\begin_inset Formula $A$
\end_inset

 on the left, we get a new differential equation with the same form as Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:body_rot_dyn"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\frac{d}{dt}\left(AR_{b}^{I}\right)=AR_{b}^{I}\skew{\w_{b/I}^{b}}
\]

\end_inset

One can see that we do not get a differential equation of the same form
 if we multiply both sides of Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:body_rot_dyn"
plural "false"
caps "false"
noprefix "false"

\end_inset

 on the 
\emph on
right
\emph default
 by 
\begin_inset Formula $A.$
\end_inset


\end_layout

\begin_layout Standard
Inertial rotation kinematics, on the other hand, are right-invariant.
 If we multiply both sides of Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:inertial_rotation_dynamics"
plural "false"
caps "false"
noprefix "false"

\end_inset

 on the right by 
\begin_inset Formula $A$
\end_inset

, we get
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\frac{d}{dt}\left(R_{I}^{b}A\right)=-\skew{\w_{b/I}^{b}}R_{I}^{b}A,
\]

\end_inset

which has the same form as Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:inertial_rotation_dynamics"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 A similar effect can be observed in quaternion dynamics, but with the order
 reversed.
\end_layout

\begin_layout Standard
The left-right invariance shows up because of our choice in representing
 
\begin_inset Formula $\w$
\end_inset

 in the body frame.
 I know this is jumping ahead a bit, but the Adjoint representation will
 allow us to flip back and forth between left- and right-vectors as necessary,
 making this distinction also a matter of convenience.
\end_layout

\begin_layout Subsection
The Solution to the Rotational Dynamics Equation
\end_layout

\begin_layout Standard
Equations 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:body_rot_dyn"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:inertial_rotation_dynamics"
plural "false"
caps "false"
noprefix "false"

\end_inset

 are first-order matrix differential equations.
 These are solved with the matrix exponential we discussed in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:mat_exp"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The solution to the body-centric equation is
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R_{b}^{I}\left(t\right)=R_{b}^{I}\left(t_{0}\right)\exp\left(\skew{\w_{b/I}^{b}}t\right)
\]

\end_inset

and the inertial dynamics are solved with
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R_{I}^{b}\left(t\right)=\exp\left(-\skew{\w_{b/I}^{b}}t\right)R_{I}^{b}\left(t_{0}\right).
\]

\end_inset

Quaternion dynamics are also easily solved in a similar fashion, as in
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\q_{b}^{I}\left(t\right) & =\exp\begin{pmatrix}0\\
-\w_{b/I}^{b}t
\end{pmatrix}\cdot\q_{b}^{I}\left(t_{0}\right)\\
\q_{I}^{b}\left(t\right) & =\q_{I}^{b}\left(t_{0}\right)\cdot\exp\begin{pmatrix}0\\
\w_{b/I}^{b}t
\end{pmatrix}.
\end{align*}

\end_inset

The infinite series Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:mat_exp_inf"
plural "false"
caps "false"
noprefix "false"

\end_inset

 can be used to compute these directly.
 However, efficient closed-form implementations are derived in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:matrix_exp_closed_form"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Section
Transformations
\end_layout

\begin_layout Standard
Now we venture into the world of rigid body transformations.
 These allow us to represent both translation and rotation simultaneously.
 As with rotations, there are two popular representations that I will consider
 in this document, the first is matrix-based, the set of 
\begin_inset Formula $4\times4$
\end_inset

 matrices, commonly known as 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

.
 The second (like rotations) will be based on complex numbers, dual unit
 quaternions.
 There are actually other representations, but we will see later all of
 these groups share the same Lie Algebra! Therefore, we can choose the represent
ation that we feel most comfortable with, or is the most efficient, etc...
 It really doesn't matter, which is a great thing.
\end_layout

\begin_layout Subsection
Homogeneous Transform Matrices
\end_layout

\begin_layout Standard
Homogeneous transforms take the form of 
\begin_inset Formula $4\times4$
\end_inset

 matrices.
 These are members of the Special Euclidean group of 3 dimensions, or 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

.
 This is by far the most common representation in robotics; it's efficient,
 and the Lie group/Lie algebra is probably the most straight-forward.
 A homogeneous transform matrix has the following block structure:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
T_{a}^{b}=\begin{bmatrix}R_{a}^{b} & \t_{b/a}^{a}\\
0 & 1
\end{bmatrix},
\]

\end_inset

where you have the rotation matrix in the upper left corner and the translation
 vector in the third column.
\end_layout

\begin_layout Standard
Let's walk through in a block-wise format what happens when two transforms
 are multiplied together.
 All we need to do is follow the matrix multiplication rules and see how
 the coordinate frames work out.
 I found this to be a very useful exercise when I first got started.
 It really hit home to me how the matrices concatenate in the same way as
 rotation matrices, and the potentially confusing parameterization of the
 translation vector.
 This procedure looks like the this:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
T_{a}^{c} & =T_{b}^{c}\cdot T_{a}^{b}\\
 & =\begin{bmatrix}R_{b}^{c} & \t_{c/b}^{c}\\
0 & 1
\end{bmatrix}\cdot\begin{bmatrix}R_{a}^{b} & \t_{b/a}^{b}\\
0 & 1
\end{bmatrix}\\
 & =\begin{bmatrix}R_{b}^{c}R_{a}^{b} & R_{b}^{c}\t_{b/a}^{b}+\t_{c/b}^{c}\\
0 & 1
\end{bmatrix}\\
 & =\begin{bmatrix}R_{a}^{c} & \t_{c/a}^{c}\\
0 & 1
\end{bmatrix}.
\end{align*}

\end_inset

So we see, we get what we expect: all the coordinate frames land the way
 we want.
\end_layout

\begin_layout Standard
We can also perform the same exercise for taking the inverse.
 Remember that the inverse of a matrix is 
\begin_inset Formula $\nicefrac{1}{\det\left(A\right)\textrm{Adj\left(A\right)}}$
\end_inset

, where Adj
\begin_inset Formula $\left(A\right)$
\end_inset

 refers to the adjugate of 
\begin_inset Formula $A.$
\end_inset

 Because it gets a little nasty, I'm going to skip actually computing the
 adjugate, but if you work it out, you can see how this apparently super
 convenient result just pops out:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\left(T_{a}^{b}\right)^{-1} & =\begin{bmatrix}R_{a}^{b} & \t_{b/a}^{b}\\
0 & 1
\end{bmatrix}^{-1}\\
 & =\frac{1}{\det\left(T_{a}^{b}\right)}\textrm{Adj}\left(T_{a}^{b}\right)\\
 & =\frac{1}{1}\begin{bmatrix}\left(R_{a}^{b}\right)^{\top} & -\left(R_{a}^{b}\right)^{\top}\t_{b/a}^{b}\\
0 & 1
\end{bmatrix}\\
 & =\begin{bmatrix}R_{b}^{a} & -R_{b}^{a}\t_{b/a}^{b}\\
0 & 1
\end{bmatrix}\\
 & =\begin{bmatrix}R_{b}^{a} & \t_{a/b}^{a}\\
0 & 1
\end{bmatrix}\\
 & =T_{b}^{a}.
\end{align*}

\end_inset

Boom.
 
\end_layout

\begin_layout Standard
If you didn't notice, it's really important to note is that the translation
 vector is defined in the 
\emph on
destination
\emph default
 frame, rather than the origin frame of the rotation matrix.
 This isn't a problem, but it was very confusing for me at first.
\end_layout

\begin_layout Subsection
Passive and Active Transformations
\end_layout

\begin_layout Standard
The same notion of passive and active transformations discussed with rotations
 applies here.
 To perform a passive transformation with 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

, we just pad the vector to be rotated with an extra 
\begin_inset Formula $1$
\end_inset

 at the bottom, and multiply by our transform matrix.
 Just for completeness, let us walk through what happens when we do this
 in a block-wise format
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\r_{b/p}^{b} & =T_{a}^{b}\cdot\r_{a/p}^{a}\\
 & =\begin{bmatrix}R_{a}^{b} & \t_{b/a}^{b}\\
0 & 1
\end{bmatrix}\cdot\begin{bmatrix}\r_{a/p}^{a}\\
1
\end{bmatrix}\\
 & =\begin{bmatrix}R_{a}^{b}\r_{a/p}^{a}+\t_{b/a}^{b}\\
1
\end{bmatrix}\\
 & =\r_{b/p}^{b}.
\end{align*}

\end_inset

Doing this at least once is another exercise that I found to be very helpful
 when first trying to use 
\begin_inset Formula $\SE\left(3\right).$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/transform_passive.svg
	width 30col%

\end_inset


\begin_inset Graphics
	filename images/transform_active.svg
	width 30col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Illustration of a passive transformation (left) and an active transformation
 (right)
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:passive_transform"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
An active transformation occurs by multiplying by the inverse of the passive
 transform as shown in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:passive_transform"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Just as with rotations, If you walk through the coordinate frames of an
 active transformation, you'll see that the coordinate frames don't line
 up right in our notation.
 This is because the active transformation does not preserve the location.
 Instead we have defined a new location, based on the coordinates of 
\begin_inset Formula $p$
\end_inset

 in frame 
\begin_inset Formula $a$
\end_inset

 projected into frame 
\begin_inset Formula $b$
\end_inset

.
 I have tried to represent this with the 
\begin_inset Formula $p^{\star}$
\end_inset

 notation in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:passive_transform"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
Transform matrices are an obvious extension to rotation matrices.
 However, just like rotation matrices, the complex number representation
 is more efficient.
 This brings us to our next transform parameterization: dual unit quaternions.
\end_layout

\begin_layout Subsection
Dual Unit Quaternions
\end_layout

\begin_layout Standard
The use of dual unit quaternions is another approach to representing a rigid
 body transform that relies on complex numbers.
 As one might expect, it can also be considered as two copies of 
\begin_inset Formula $\SU\left(2\right)$
\end_inset

 as well.
 Dual quaternions are more popular in the computer graphics and physics
 community, and for the same reasons that quaternions often out-perform
 rotation matrices, dual quaternions are often yield the most efficient
 representation for rigid body transformations.
\end_layout

\begin_layout Standard
Before I jump into dual quaternions, I'm going to first introduce dual numbers.
 Dual numbers are similar in many ways to imaginary numbers.
 The idea is that we define a scalar 
\begin_inset Formula $\epsilon$
\end_inset

 as a mathematical construct that splits a numerical representation into
 two components.
 For example, we might have the dual number 
\begin_inset Formula 
\[
z=r+d\epsilon,
\]

\end_inset

where 
\begin_inset Formula $r$
\end_inset

 is the real part, and 
\begin_inset Formula $d$
\end_inset

 is the dual part.
 We also define 
\begin_inset Formula $\epsilon$
\end_inset

 as having special rules where 
\begin_inset Formula $\epsilon^{2}=0,$
\end_inset

 but 
\begin_inset Formula $\epsilon\neq0.$
\end_inset

 Again, this is similar to complex numbers where we use 
\begin_inset Formula $i$
\end_inset

 to distinguish imaginary components from real components.
 The dual operator 
\begin_inset Formula $\epsilon$
\end_inset

 is used in much the same way.
 It should be noted that 
\begin_inset Formula $\epsilon$
\end_inset

 in this context is just a special symbol.
 It is 
\emph on
not
\emph default
 related to small perturbations, as it is used in other areas of mathematics.
 Trying to interpret it in this way can sometimes be confusing.
\end_layout

\begin_layout Standard
Dual numbers follow these basic rules.
 If two dual numbers are added, then the real part and dual part are simply
 summed separately (just like imaginary numbers).
 For example,
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x=a+b\epsilon,\quad y=c+d\epsilon
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x+y=\left(a+c\right)+\left(b+d\right)\epsilon.
\]

\end_inset

Multiplication also is performed similarly to complex multiplication, but
 with the rule that 
\begin_inset Formula $\epsilon^{2}=0$
\end_inset

.
 For example,
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
x\cdot y & =ac+ad\epsilon+bc\epsilon+bd\epsilon^{2}\\
 & =ac+\left(ad+bc\right)\epsilon.
\end{align*}

\end_inset

Finally, dual variables have their own concept of conjugate, given in the
 expected way and denoted as 
\begin_inset Formula $\left(\cdot\right)^{*}.$
\end_inset

 For example,
\begin_inset Formula 
\begin{align*}
z & =r+d\epsilon\\
z^{*} & =r-d\epsilon.
\end{align*}

\end_inset

If 
\begin_inset Formula $r$
\end_inset

 and 
\begin_inset Formula $d$
\end_inset

 are also complex variables, then we actually have three forms of conjugation.
 Imaginary conjugation, dual conjugation, and imaginary-dual conjugation,
 given as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\bar{z} & =\bar{r}+\bar{d}\epsilon & \text{imag}\\
z^{*} & =r-d\epsilon. & \text{dual}\\
\bar{z}^{*} & =\bar{r}-\bar{d}\epsilon. & \text{imag+dual}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Now we are ready to talk about dual quaternions, 
\begin_inset Formula $\mathbb{D}\S^{3}$
\end_inset

 and 
\begin_inset Formula $\mathbb{D}\SU\left(2\right)$
\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
The 
\begin_inset Formula $\mathbb{D}$
\end_inset

 here refers to the dual formulation.
\end_layout

\end_inset

.
 We can represent 3D transforms with the dual unit quaternion pair
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\qq=\q_{r}+\epsilon\q_{d},
\]

\end_inset

where 
\begin_inset Formula $\q_{r}$
\end_inset

 is called the real part and 
\begin_inset Formula $\q_{d}$
\end_inset

 is the dual part.
 The real part contains the rotation, while the dual part is one-half the
 pure quaternion containing the translation half rotated, as in
\begin_inset Foot
status open

\begin_layout Plain Layout
This may seem like a weird parameterization, and some (like myself) may
 question if there is a simpler way, rather than handling this half-rotated
 vector.
 It comes from using the simplest form of the underlying Lie Algebra, and
 finding the natural expression of that group in dual quaternions.
 Trying to form a convenient group and mangling the underlying algebra to
 match results in losing a lot of the beauty of Lie Theory.
 It's better to just use the natural expression, starting at the algebra
 and working up.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\q_{r} & =\q_{a}^{b}\\
\q_{d} & =\frac{1}{2}\begin{pmatrix}0\\
\t_{b/a}^{a}
\end{pmatrix}\cdot\q_{a}^{b}.
\end{align*}

\end_inset

If we combine the quaternion algebra operations with the dual number, we
 get dual quaternion arithmetic.
 Dual quaternion multiplication is given as one might expect, with
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\qq_{1}\circ\qq_{2}=\q_{1r}\cdot\q_{2r}+\left(\q_{1r}\cdot\q_{2d}+\q_{1d}\cdot\q_{2r}\right)\epsilon.
\]

\end_inset

Let's walk through this together and make sure the coordinate frames all
 line up.
 Before we do this, however, we need the following trick.
 If we take the quaternion rotation formula, and split it up, we get an
 expression for dealing with half-rotated vectors:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\t^{b} & =\left(\q_{a}^{b}\right)^{-1}\cdot\t^{a}\cdot\q_{a}^{b}\nonumber \\
\q_{a}^{b}\cdot\t^{b} & =\q_{a}^{b}\cdot\left(\q_{a}^{b}\right)^{-1}\cdot\t^{a}\cdot\q_{a}^{b}\nonumber \\
\q_{a}^{b}\cdot\t^{b} & =\t^{a}\cdot\q_{a}^{b}.\label{eq:quat_switch_trick}
\end{align}

\end_inset

Now can work through the dual quaternion arithmetic, and see how dual quaternion
 multiplication results in concatenating transforms.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\qq_{a}^{b}\circ\qq_{b}^{c} & =\q_{a}^{b}\cdot\q_{b}^{c}+\frac{\epsilon}{2}\left(\q_{a}^{b}\cdot\begin{pmatrix}0\\
\t_{c/b}^{b}
\end{pmatrix}\cdot\q_{b}^{c}+\begin{pmatrix}0\\
\t_{b/a}^{a}
\end{pmatrix}\cdot\q_{a}^{b}\cdot\q_{b}^{c}\right)\\
 & =\q_{a}^{c}+\frac{\epsilon}{2}\left(\begin{pmatrix}0\\
\t_{c/b}^{a}
\end{pmatrix}\cdot\q_{a}^{b}\cdot\q_{b}^{c}+\begin{pmatrix}0\\
\t_{b/a}^{a}
\end{pmatrix}\cdot\q_{a}^{b}\cdot\q_{b}^{c}\right) & \grey{\textrm{(Eq. \ref{eq:quat_switch_trick})}}\\
 & =\q_{a}^{c}+\frac{\epsilon}{2}\left(\begin{pmatrix}0\\
\t_{c/a}^{a}
\end{pmatrix}\cdot\q_{a}^{c}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Inverting (or computing the complex conjugate of) a dual quaternion is as
 simple as inverting the two components.
 To work through this operation, line by line, we will also need to use
 the trick from Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:quat_switch_trick"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\left(\qq_{a}^{b}\right)^{-1} & =\left(\q_{a}^{b}\right)^{-1}+\frac{\epsilon}{2}\left(\begin{pmatrix}0\\
\t_{b/a}^{a}
\end{pmatrix}\cdot\q_{a}^{b}\right)^{-1}\\
 & =\q_{b}^{a}+\frac{\epsilon}{2}\left(\left(\q_{a}^{b}\right)^{-1}\cdot\begin{pmatrix}0\\
\t_{b/a}^{a}
\end{pmatrix}^{-1}\right)\\
 & =\q_{b}^{a}+\frac{\epsilon}{2}\left(\q_{b}^{a}\cdot\begin{pmatrix}0\\
\t_{a/b}^{a}
\end{pmatrix}\right)\\
 & =\q_{b}^{a}+\frac{\epsilon}{2}\left(\begin{pmatrix}0\\
\t_{a/b}^{b}
\end{pmatrix}\cdot\q_{b}^{a}\right) & \textrm{\grey{\textrm{(Eq. \ref{eq:quat_switch_trick})}}}\\
 & =\qq_{b}^{a}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Transforming a vector is done by creating a pure quaternion (with no rotational
 component) from the translation vector, then pre- and post-multiplying
 by the dual quaternion and its dual-complex conjugate.
 If we work through the steps we can see how this works:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\r_{p/b}^{b} & =\left(\bar{\qq_{a}^{b}}\right)^{*}\circ\r_{p/a}^{a}\circ\qq_{a}^{b}\\
 & =\left[\q_{b}^{a}-\frac{\epsilon}{2}\left(\t_{a/b}^{b}\cdot\q_{b}^{a}\right)\right]\circ\left[\boldsymbol{1}+\epsilon\r_{p/a}^{a}\right]\circ\left[\q_{a}^{b}+\frac{\epsilon}{2}\left(\t_{b/a}^{a}\cdot\q_{a}^{b}\right)\right]\\
 & =\left[\q_{b}^{a}-\frac{\epsilon}{2}\left(\t_{a/b}^{b}\cdot\q_{b}^{a}\right)\right]\circ\left[\left(\boldsymbol{1}\cdot\q_{a}^{b}\right)+\frac{\epsilon}{2}\left(\boldsymbol{1}\cdot\left(\t_{b/a}^{a}\cdot\q_{a}^{b}\right)+2\r_{p/a}^{a}\cdot\q_{a}^{b}\right)\right]\\
 & =\left(\q_{b}^{a}\cdot\q_{a}^{b}\right)+\frac{\epsilon}{2}\left(\q_{b}^{a}\cdot\left(\left(-\t_{b/a}^{a}\cdot\q_{a}^{b}\right)+2\r_{p/a}^{a}\cdot\q_{a}^{b}\right)+\left(\t_{a/b}^{b}\cdot\q_{b}^{a}\right)\cdot\q_{a}^{b}\right)\\
 & =\boldsymbol{1}+\frac{\epsilon}{2}\left(\q_{b}^{a}\cdot\left(-\t_{b/a}^{a}\cdot\q_{a}^{b}\right)+\q_{b}^{a}\cdot2\r_{p/a}^{a}\cdot\q_{a}^{b}+\left(\t_{a/b}^{b}\cdot\q_{b}^{a}\right)\cdot\q_{a}^{b}\right)\\
 & =\boldsymbol{1}+\frac{\epsilon}{2}\left(-\t_{b/a}^{b}+2\r_{p/a}^{b}+\t_{a/b}^{b}\right)\\
 & =\boldsymbol{1}+\frac{\epsilon}{2}\left(2\r_{p/a}^{b}-2\t_{b/a}^{b}\right)\\
 & =\boldsymbol{1}+\epsilon\left(\r_{p/b}^{b}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Subsection
Dynamics and Invariance
\end_layout

\begin_layout Standard
As with rotations, the same concept of left- and right-invariance also applies
 to transforms.
 If we parameterize rigid body dynamics in body-centric coordinates, we
 get the left-invariant dynamics
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\dot{T}_{b}^{I}=T_{b}^{I}\begin{pmatrix}\skew{\w_{b/I}^{b}} & \v_{b/I}^{b}\\
0 & 1
\end{pmatrix}.
\]

\end_inset

and the inertial coordinates have right-invariant dynamics, given as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\dot{T}_{I}^{b}=\begin{pmatrix}-\skew{\w_{b/I}^{b}} & -\v_{b/I}^{b}\\
0 & 1
\end{pmatrix}T_{I}^{b}
\]

\end_inset

Like ordinary quaternions and rotation matrices, dual quaternions also concatena
te opposite 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

, so the order of the dynamic equations is flipped, as in
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\dot{\qq}_{b}^{I} & =-\frac{1}{2}\left(\begin{pmatrix}0\\
\w_{b/I}^{b}
\end{pmatrix}+\epsilon\begin{pmatrix}0\\
\v_{b/I}^{b}
\end{pmatrix}\right)\circ\qq_{b}^{I}\left(t_{0}\right)\\
\dot{\qq}_{I}^{b} & =\frac{1}{2}\qq_{I}^{b}\circ\left(\begin{pmatrix}0\\
\w_{b/I}^{b}
\end{pmatrix}+\epsilon\begin{pmatrix}0\\
\v_{b/I}^{b}
\end{pmatrix}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Section
Lie Groups
\end_layout

\begin_layout Standard
Lie Group theory is a very old discipline deeply rooted in mathematics and
 theoretical physics.
 It was developed to better understand and model nature at the most fundamental
 levels.
 In fact, much of particle physics can be modeled using Lie group theory,
 including special relativity and quantum dynamics.
 While we don't often need to properly model Minkowski space, we can learn
 a lot about modeling physical systems by piggybacking on physics literature.
\end_layout

\begin_layout Standard
If you can't tell from the last 4 sections, we end up doing a lot of reasoning
 about coordinate frames in robotics.
 We often need to reason about how they move, and how they relate to one
 another.
 We also find ourselves trying to infer things about these coordinate frames
 given noisy sensor measurements.
 There are a variety of ways that we could do this, but the real problems
 show up when we need to this in real time under realistic computational
 limitations.
 
\end_layout

\begin_layout Standard
To meet actual computational requirements, we generally want to be able
 to leverage linear algebra and all of its tools.
 Unfortunately, however, coordinate frame transformations are not vectors,
 so it's not completely obvious how we can use these tools in a principled
 manner.
 Luckily, we have Lie group theory that can bridge this gap.
 We will see in this section how we can use Lie Groups to take non-vector
 group objects, and map them into a vector space where we can perform linear
 algebra and reason about things in an efficient manner, then map our results
 back into the group so we can do useful things.
\end_layout

\begin_layout Standard
As a further motivating example, consider the case where we might want to
 represent our uncertainty of some estimate of a rotation matrix.
 In general, assuming that our uncertainty of some vector quantity 
\begin_inset Formula $\x$
\end_inset

 can be represented with a multivariate Gaussian distribution, the covariance
 of this distribution is computed as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\Sigma_{\x}=E\left[\left(\x-\hat{\x}\right)\left(\x-\hat{\x}\right)^{\top}\right],
\]

\end_inset

where 
\begin_inset Formula $\hat{\x}$
\end_inset

 was our best estimate and 
\begin_inset Formula $\x$
\end_inset

 was the true value.
 However, if we consider putting our rotation matrix 
\begin_inset Formula $R$
\end_inset

 into this equation, what does 
\begin_inset Formula $R-\hat{R}$
\end_inset

 even mean? Subtraction is not a sensible operation when talking about rotation
 matrices.
 First off, it would no longer be a rotation matrix, as it would not longer
 have unit determinant, and second, it would have nine parameters, when
 we expect there to only be three
\begin_inset Foot
status open

\begin_layout Plain Layout
Using Euler angles doesn't get you out of this, either.
 It's just more subtle.
 Think about what it really means to subtract two 
\begin_inset Quotes eld
\end_inset

vectors
\begin_inset Quotes erd
\end_inset

 of euler angles.
 The intermediate axes defining the Euler angle parameterization will not
 line up, so it's not a sensible operation.
\end_layout

\end_inset

.
 Lie group theory solves this problem for us, as we will soon find out.
\end_layout

\begin_layout Subsection
Group Theory
\end_layout

\begin_layout Standard
Before we launch into Lie groups, let us consider groups generically.
 A group is simply a set of members which are 
\emph on
closed
\emph default
 under some group operator.
 This means that if I had two group members 
\begin_inset Formula $g_{1}$
\end_inset

 and 
\begin_inset Formula $g_{2}$
\end_inset

 and I act on these members with the group operator 
\begin_inset Formula $\circ$
\end_inset

, then the result should also be a part of the group.
 For example,
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
g_{1}\circ g_{2}=g_{3},\qquad\qquad g_{1},g_{2},g_{3}\in G.
\]

\end_inset

We use groups all the time, maybe without knowing it.
 Some commonly used groups in robotics are vectors (closed under vector
 addition), rotation matrices (closed under matrix multiplication), and
 quaternions (closed under quaternion multiplication).
 Some more exotic groups could include binary vectors closed under bit-wise-XOR,
 positive definite matrices closed under matrix addition and integers closed
 under addition.
\begin_inset Foot
status open

\begin_layout Plain Layout
In case you need another reason to stop using Euler angles, Euler angles
 aren't even a group, unless, of course, the group operator is defined as
 
\begin_inset Quotes eld
\end_inset

convert to rotation matrix, multiply, and then convert back to Euler angles
\begin_inset Quotes erd
\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Lie Group Definition
\end_layout

\begin_layout Standard
A Lie group is a group that is also a differentiable manifold.
 What this means is that every group element 
\begin_inset Formula $A$
\end_inset

 induces a map from one group element 
\series bold

\begin_inset Formula $B$
\end_inset


\series default
 to another 
\begin_inset Formula $C=A\circ B$
\end_inset

 and that this mapping is differentiable.
 Of all the groups mentioned above, vectors, rotation matrices, quaternions
 and positive definite matrices are also Lie Groups, while binary vectors
 closed under XOR and integers are not, because the mappings are not differentia
ble.
\end_layout

\begin_layout Standard
Each Lie groups has an associated Lie algebra, typically indicated by using
 the fraktur font, (i.e.
 
\begin_inset Formula $\so\left(3\right)).$
\end_inset

 A Lie algebra is a vector space 
\begin_inset Formula $\mathfrak{g}$
\end_inset

 equipped with a binary operation called the 
\emph on
Lie bracket,
\emph default
 
\begin_inset Formula $[,]$
\end_inset

.
 For matrix Lie algebras, the Lie bracket is given as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\left[A,B\right]=AB-BA.
\]

\end_inset

The Lie bracket abides by the following rules:
\end_layout

\begin_layout Itemize
Bilinearity: 
\begin_inset Formula $\left[aX+bY,Z\right]=a\left[X,Z\right]+b\left[Y,Z\right]$
\end_inset


\end_layout

\begin_layout Itemize
Anticommutativity: 
\begin_inset Formula $\left[X,Y\right]=-\left[Y,X\right]\quad\forall X,Y\in\mathfrak{g}$
\end_inset


\end_layout

\begin_layout Itemize
The Jacobi Identity: 
\begin_inset Formula $\left[X,\left[Y,Z\right]\right]+\left[Z,\left[X,Y\right]\right]+\left[Y,\left[Z,X\right]\right]=0\quad\forall X,Y,Z\in\mathfrak{g}$
\end_inset


\end_layout

\begin_layout Standard
The Lie Algebra defines something equivalent to the basis of the Lie Group,
 except instead of basis vectors, we have 
\emph on
generators
\emph default
.
 The generators are the building blocks of the group, and typically encode
 the degrees of freedom in a orthonormal way.
 Each member of any Lie Algebra can be expressed as the exponential of a
 linear combination of the generators.
\end_layout

\begin_layout Standard
There is an important theorem that we will use a little later called the
 Baker-Campbell-Hausdorff Theorem (BCH).
 This theorem states that the solution 
\begin_inset Formula $Z$
\end_inset

 to
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
e^{X}e^{Y}=e^{Z},
\]

\end_inset

can be expressed as a power series involving commutators 
\begin_inset Formula $X$
\end_inset

 and 
\begin_inset Formula $Y$
\end_inset

 in the Lie bracket.
 The first couple terms of this series is given as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Z=X+Y+\frac{1}{2}\left[X,Y\right]+\frac{1}{12}\left[X,\left[X,Y\right]\right]-\frac{1}{12}\left[Y,\left[X,Y\right]\right]+\dots.
\]

\end_inset

This formula is central to many proofs in the Lie group-Lie algebra corresponden
ce.
\end_layout

\begin_layout Subsection
The Generators of 
\begin_inset Formula $\SO\left(3\right)$
\end_inset


\end_layout

\begin_layout Standard
The easiest way to come up with the generators of a Lie Group is to consider
 the infinitesimal transformations that the group can accommodate.
 For example, the generators of 
\begin_inset Formula $\so\left(3\right)$
\end_inset

 are given by
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
J_{1} & =\begin{pmatrix}0 & 0 & 0\\
0 & 0 & -1\\
0 & 1 & 0
\end{pmatrix} & J_{2} & =\begin{pmatrix}0 & 0 & 1\\
0 & 0 & 0\\
-1 & 0 & 0
\end{pmatrix} & J_{3} & =\begin{pmatrix}0 & -1 & 0\\
1 & 0 & 0\\
0 & 0 & 0
\end{pmatrix}.
\end{align*}

\end_inset

Obviously, there is a lot more rigor here than I can really provide, not
 being a mathematician myself
\begin_inset Foot
status open

\begin_layout Plain Layout
For example, I'm not sure if the choice to make these line up exactly with
 the skew-symmetric matrix simply a matter of convenience or something more
 fundamental.
\end_layout

\end_inset

.
 However, we can prove that these generators are correct with this simple
 exercise.
 We know that all elements of 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

 must follow these conditions:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
A^{\top}A & =I & \det\left(A\right) & =1.
\end{align*}

\end_inset

We also know that every element of 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

 can be written in terms of some linear combination of generators 
\begin_inset Formula $J$
\end_inset

 as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
A=\exp\left(\theta J\right).
\]

\end_inset

We can back out the structure of 
\begin_inset Formula $J$
\end_inset

 through putting it into the definition conditions of 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

.
 The first condition yields
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
A^{\top}A & =I\\
\exp\left(\theta J\right)^{\top}\exp\left(\theta J\right) & =I\\
J^{\top}+J & =0.
\end{align*}

\end_inset

If we use the second condition (and the identity 
\begin_inset Formula $\det\left(\exp\left(A\right)\right)=\exp\left(\textrm{tr}\left(A\right)\right)$
\end_inset

) we see
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\det\left(A\right) & =1\\
\det\left(e^{\theta J}\right) & =1\\
\textrm{tr}\left(J\right) & =0.
\end{align*}

\end_inset

So, the generators for the algebra 
\begin_inset Formula $\so\left(3\right)$
\end_inset

 must be anti-symmetric, traceless 
\begin_inset Formula $3\times3$
\end_inset

 matrices.
 Three linearly independent matrices fulfilling these conditions 
\emph on
and
\emph default
 the rules for a lie algebra are
\begin_inset Foot
status open

\begin_layout Plain Layout
Specifically, we need generators that obey the right-hand rule through the
 Lie bracket so they can satisfy the Jacobi Identity.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
J_{1} & =\begin{pmatrix}0 & 0 & 0\\
0 & 0 & -1\\
0 & 1 & 0
\end{pmatrix} & J_{2} & =\begin{pmatrix}0 & 0 & 1\\
0 & 0 & 0\\
-1 & 0 & 0
\end{pmatrix} & J_{3} & =\begin{pmatrix}0 & -1 & 0\\
1 & 0 & 0\\
0 & 0 & 0
\end{pmatrix}.
\end{align*}

\end_inset

Therefore, these must be valid generators of 
\begin_inset Formula $\so\left(3\right).$
\end_inset


\end_layout

\begin_layout Standard
As mentioned before, all members of a Lie group can be created by computing
 the exponential of a linear combination of the generators.
 Furthermore, because the generators are orthogonal, 
\begin_inset Formula $\so\left(3\right)$
\end_inset

 is isomorphic to 
\begin_inset Formula $\R^{3}$
\end_inset

.
 Therefore, to keep things concise, we can actually form a vector whose
 coefficients are then multiplied by the generators.
 In the case of 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

, this is the same as computing the skew-symmetric matrix of a vector.
 But in general, the 
\begin_inset Formula $\left(\cdot\right)^{\wedge}$
\end_inset

 and 
\begin_inset Formula $\left(\cdot\right)^{\vee}$
\end_inset

 notation is used to indicate this mapping.
 For example, for 
\begin_inset Formula $\so\left(3\right):$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\left(\v^{\wedge}\right) & =\sum_{i}J_{i}\e_{i}^{\top}\v\\
 & =J_{1}\v_{x}+J_{2}\v_{y}+J_{3}\v_{z}\\
 & =\begin{pmatrix}0 & -\v_{z} & \v_{y}\\
\v_{z} & 0 & -\v_{x}\\
-\v_{y} & -\v_{x} & 0
\end{pmatrix},
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\left(\v^{\wedge}\right)^{\vee}=\v.
\]

\end_inset

This notation is used in some literature 
\begin_inset CommandInset citation
LatexCommand cite
key "Barfoot2019,Sola2019"
literal "false"

\end_inset

, but not in others 
\begin_inset CommandInset citation
LatexCommand cite
key "Drummond2014,Ethan2019"
literal "false"

\end_inset

.
 Since the two representations (the matrix algebra and the vector) are isomorphi
c, the mapping to the matrix Lie Algebra is often skipped notationally,
 and 
\begin_inset Formula $\exp\left(\v\right)$
\end_inset

 is written while 
\begin_inset Formula $\exp\left(\v^{\wedge}\right)$
\end_inset

 would technically be more correct.
 As computing the matrix exponential of 
\begin_inset Formula $\v\in\R^{3}$
\end_inset

 is actually not possible given the definition above, the mapping of the
 vector to the matrix Lie Algebra is implied in literature where the mapping
 is ignored.
\end_layout

\begin_layout Subsection
The Generators of 
\begin_inset Formula $\SU\left(2\right)/\S^{3}$
\end_inset


\end_layout

\begin_layout Standard
We can follow the same procedure that we performed to derive the generators
 of 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

 to get the generators of 
\begin_inset Formula $\SU\left(2\right)/\S^{3}$
\end_inset

.
 First, let's start with the conditions of 
\begin_inset Formula $\SU\left(2\right)$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
U^{\dagger}U=UU^{\dagger}=1\qquad\qquad\det\left(U\right)=1.
\]

\end_inset

Now, as before, let us write these conditions in terms of the generators,
 and use BCH in tandem with the fact that 
\begin_inset Formula $\left[U^{\dagger},U\right]=0$
\end_inset

 to get
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
U^{\dagger}U & =1\nonumber \\
\left(\exp\left(iJ\right)\right)^{\dagger}\exp\left(iJ\right) & =1\nonumber \\
\exp\left(-iJ^{\dagger}\right)\exp\left(iJ\right) & =1\nonumber \\
\exp\left(-iJ^{\dagger}+iJ+\frac{1}{2}\text{\left[J^{\dagger},J\right]}\right)+\dots & =1 & \grey{\textrm{(BCH)}}\nonumber \\
\exp\left(-iJ^{\dagger}+iJ\right) & =1\nonumber \\
-iJ^{\dagger}+iJ & =0\nonumber \\
J^{\dagger} & =J.\label{eq:HermetianSU2}
\end{align}

\end_inset

Now, if we look at the second condition, (again, leveraging 
\begin_inset Formula $\det\left(\exp\left(A\right)\right)=\exp\left(\textrm{tr}\left(A\right)\right)$
\end_inset

), we can see
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\det\left(\exp\left(iJ\right)\right) & =1\nonumber \\
\exp\left(i\textrm{tr}\left(J\right)\right) & =1\nonumber \\
\textrm{tr}\left(J\right) & =0.\label{eq:tracelessSU2}
\end{align}

\end_inset

So the generators must be Hermetian (Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:HermetianSU2"
plural "false"
caps "false"
noprefix "false"

\end_inset

), and traceless (Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:tracelessSU2"
plural "false"
caps "false"
noprefix "false"

\end_inset

) complex 
\begin_inset Formula $2\times2$
\end_inset

 matrices.
 The standard basis for this set is
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
J_{1} & =\begin{pmatrix}0 & 1\\
1 & 0
\end{pmatrix} & J_{2} & =\begin{pmatrix}0 & -i\\
i & 0
\end{pmatrix} & J_{3} & =\begin{pmatrix}1 & 0\\
0 & -1
\end{pmatrix}.
\end{align*}

\end_inset

This choice of generators corresponds with infinitesimal rotations in 
\begin_inset Formula $\SU\left(2\right),$
\end_inset

 and because of the isomorphism between 
\begin_inset Formula $\SU\left(2\right)$
\end_inset

 and 
\begin_inset Formula $\S^{3}$
\end_inset

 (unit quaternions), we have also just derived the generators for unit quaternio
ns as well:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
J_{1} & =i & J_{2} & =j & J_{3} & =k.
\end{align*}

\end_inset

This means that the 
\begin_inset Formula $\left(\cdot\right)^{\wedge}$
\end_inset

 operations for 
\begin_inset Formula $\SU\left(2\right)$
\end_inset

 and 
\begin_inset Formula $\S^{3}$
\end_inset

 are given as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\w^{\wedge}=\begin{pmatrix}\w_{z} & \w_{x}-\w_{y}i\\
\w_{x}+\w_{y}i & \w_{z}
\end{pmatrix},
\]

\end_inset

and
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\w^{\wedge}=\begin{pmatrix}0\\
\w
\end{pmatrix},
\]

\end_inset

respectively, while the 
\begin_inset Formula $\left(\cdot\right)^{\vee}$
\end_inset

operator is defined as the inverse of either operation.
\end_layout

\begin_layout Standard
There is a very interesting relationship between 
\begin_inset Formula $\su\left(2\right)$
\end_inset

 and 
\begin_inset Formula $\so\left(3\right)$
\end_inset

.
 Both algebras have the following property:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\left[J_{1},J_{2}\right] & =J_{3} & \left[J_{2},J_{1}\right] & =-J_{3}\\
\left[J_{2},J_{3}\right] & =J_{1} & \left[J_{3},J_{2}\right] & =-J_{1}\\
\left[J_{3},J_{1}\right] & =J_{2} & \left[J_{1},J_{3}\right] & =-J_{2}.
\end{align*}

\end_inset

It turns out, this is indicative of a more fundamental result.
 One can say that 
\begin_inset Formula $\SU\left(2\right)$
\end_inset

 and 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

 have the same Lie algebra, because we define Lie algebras by their Lie
 bracket.
 Forgive the extended quotation, but this summary from 
\emph on
Physics From Symmetry
\begin_inset CommandInset citation
LatexCommand cite
key "schwichtenberg_2015"
literal "false"

\end_inset


\emph default
 explains this concept in detail, as well as giving a very nice motivation
 for why we use Lie Algebras in the first place.
\end_layout

\begin_layout Quote
There is precisely one simply-connected Lie group corresponding to each
 Lie algebra.
 This simply-connected group can be thought of as the "mother" of all those
 groups having the same Lie algebra, because there are maps to all other
 groups with the same Lie algebra from the simply connected group, but not
 vice versa.
 We could call it the mother group of this particular Lie algebra, but mathemati
cians tend to be less dramatic and call it the covering group.
 All other groups having the same Lie algebra are said to be covered by
 the simply connected one.
 
\begin_inset Formula $SU(2)$
\end_inset

 is the double cover of 
\begin_inset Formula $SO(3)$
\end_inset

.
 This means there is a two-to-one map from 
\begin_inset Formula $SU(2)$
\end_inset

 to 
\begin_inset Formula $SO(3)$
\end_inset

.
\end_layout

\begin_layout Quote
Furthermore, 
\begin_inset Formula $SU(2)$
\end_inset

 is the three sphere, which is a simply connected manifold.
 Therefore, we have found the "most important" group belonging to the Lie
 algebra.
 We can get all other groups belonging to this Lie algebra through maps
 from 
\begin_inset Formula $SU(2)$
\end_inset

.
\end_layout

\begin_layout Quote
We can now understand what manifold 
\begin_inset Formula $SO(3)$
\end_inset

 is.
 The map from 
\begin_inset Formula $SU(2)$
\end_inset

 to 
\begin_inset Formula $SO(3)$
\end_inset

 identifies with two points of 
\begin_inset Formula $SU(2)$
\end_inset

, one point of 
\begin_inset Formula $SO(3)$
\end_inset

.
 Therefore, we can think of 
\begin_inset Formula $SO(3)$
\end_inset

 as the top half of 
\begin_inset Formula $\S^{3}$
\end_inset


\end_layout

\begin_layout Quote
We can see, from the point of view that Lie groups are manifolds that 
\begin_inset Formula $SU(2)$
\end_inset

 is a more complete object than 
\begin_inset Formula $SO(3)$
\end_inset

.
 
\begin_inset Formula $SO(3)$
\end_inset

 is just "part" of the complete object.
\end_layout

\begin_layout Quote
...
\end_layout

\begin_layout Quote
To describe nature at the most fundamental level, we must use the covering
 group, instead of any of the other groups that one can map to from the
 covering group.
 We are able to derive the representations of the most fundamental group,
 belonging to a given Lie algebra, by deriving representations of the Lie
 algebra.
 We can then put the matrices representing the Lie algebra elements (the
 generators) into the exponential function to get matrices representing
 group elements.
 
\end_layout

\begin_layout Quote
Herein lies the strength of Lie theory.
 By using pure mathematics we are able to reveal something fundamental about
 nature.
 The standard symmetry group of special relativity hides something from
 us [the spin of elementary particles], because it is not the most fundamental
 group belonging to this symmetry.
 The covering group of the Poincar group is the fundamental group and therefore
 we will use it to describe nature.
\end_layout

\begin_layout Standard
What Schwichtenberg is talking about is the fact that the double cover of
 the Lorentz group is able to represent the spin of a particle, while the
 standard Lorentz group cannot.
 This is analogous to the difference between the use of 
\begin_inset Formula $\S^{3}/\SU\left(2\right)$
\end_inset

 versus 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

.
 In robotics, we are typically unconcerned with the bottom half of the 
\begin_inset Formula $\S^{3}$
\end_inset

 unit sphere, so there is no fundamental drawback to using 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

 like there is in particle physics.
 However, there is something about nature and pure mathematics that encodes
 rotations in a double cover, and 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

 only tells us half of the story.
\end_layout

\begin_layout Standard
Finally, it's crucial to realize that the Lie groups arise from and are
 defined by the Lie algebra, and therefore by the generators.
 Not the other way around.
 By starting at the generators we can capture at a more fundamental level
 what is going on in 3D rotations, and what the manifold really is.
 
\end_layout

\begin_layout Subsection
The generators of 
\begin_inset Formula $\SE\left(3\right)$
\end_inset


\end_layout

\begin_layout Standard
As mentioned before, 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

 is the set of rigid body transforms.
 Lie Theory as developed by physicists has very little to say about 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

, as it is actually a subset of the set of 
\begin_inset Formula $4\times4$
\end_inset

 matrices, known classically as the Lorentz group.
 The Lorentz group (or the complexified version, octonians) are used to
 encode not only rigid body transforms, but also the dilation of space and
 time due to relativistic effects.
 In robotics, we can usually restrict ourselves to time and space-preserving
 transformations, so we can use a simplified version of the Lorentz space
 generators.
\begin_inset Foot
status open

\begin_layout Plain Layout
The bottom row of the 
\begin_inset Formula $4\times4$
\end_inset

 matrix is used in the Lorentz group, whereas is it not used in 
\begin_inset Formula $\SE\left(3\right).$
\end_inset

 The Lorentz group generators continue the skew-symmetric pattern we are
 used to in this bottom row and right column.
 For more information about using Lie groups to model spacetime, 
\begin_inset CommandInset citation
LatexCommand cite
key "schwichtenberg_2015"
literal "false"

\end_inset

 is a phenomenal introductory text to Lie groups in the context of theoretical
 physics.
 It includes a very good explanation of the Lorentz group and its double-cover.
\end_layout

\end_inset

 
\end_layout

\begin_layout Standard
The generators of 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

 are just the basis of infinitesimal transformations along each degree of
 freedom.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
J_{1} & =\begin{pmatrix}0 & 0 & 0 & 0\\
0 & 0 & -1 & 0\\
0 & 1 & 0 & 0\\
0 & 0 & 0 & 0
\end{pmatrix} & J_{2} & =\begin{pmatrix}0 & 0 & 1 & 0\\
0 & 0 & 0 & 0\\
-1 & 0 & 0 & 0\\
0 & 0 & 0 & 0
\end{pmatrix} & J_{3} & =\begin{pmatrix}0 & -1 & 0 & 0\\
1 & 0 & 0 & 0\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0
\end{pmatrix}\\
J_{4} & =\begin{pmatrix}0 & 0 & 0 & 1\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0
\end{pmatrix} & J_{5} & =\begin{pmatrix}0 & 0 & 0 & 0\\
0 & 0 & 0 & 1\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0
\end{pmatrix} & J_{6} & =\begin{pmatrix}0 & 0 & 0 & 0\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 1\\
0 & 0 & 0 & 0
\end{pmatrix}.
\end{align*}

\end_inset

The use of these generators defines the 
\begin_inset Formula $\left(\cdot\right)^{\wedge}$
\end_inset

 operator for 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

 as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{pmatrix}\w\\
\v
\end{pmatrix}^{\wedge}=\begin{pmatrix}\skew{\w} & \v\\
0 & 0
\end{pmatrix},
\]

\end_inset

and 
\begin_inset Formula $\left(\cdot\right)^{\vee}$
\end_inset

 as the inverse operation.
\end_layout

\begin_layout Subsection
The generators of 
\begin_inset Formula $\mathbb{D}\SU\left(2\right)$
\end_inset

 and 
\begin_inset Formula $\mathbb{D}\S^{3}$
\end_inset


\end_layout

\begin_layout Standard
As with 
\begin_inset Formula $\SE\left(3\right),$
\end_inset

 we use only the subset of the two copies of 
\begin_inset Formula $\su\left(2\right)$
\end_inset

 necessary to encode time and space-preserving 3D transformations.
 The generators for this group are
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
J_{1} & =\begin{pmatrix}0 & 1\\
1 & 0
\end{pmatrix}+\epsilon\begin{pmatrix}0 & 0\\
0 & 0
\end{pmatrix} & J_{2} & =\begin{pmatrix}0 & -i\\
i & 0
\end{pmatrix}+\epsilon\begin{pmatrix}0 & 0\\
0 & 0
\end{pmatrix} & J_{3} & =\begin{pmatrix}1 & 0\\
0 & -1
\end{pmatrix}+\epsilon\begin{pmatrix}0 & 0\\
0 & 0
\end{pmatrix}\\
J_{4} & =\begin{pmatrix}0 & 0\\
0 & 0
\end{pmatrix}+\epsilon\begin{pmatrix}0 & 1\\
1 & 0
\end{pmatrix} & J_{5} & =\begin{pmatrix}0 & 0\\
0 & 0
\end{pmatrix}+\epsilon\begin{pmatrix}0 & i\\
i & 0
\end{pmatrix} & J_{6} & =\begin{pmatrix}0 & 0\\
0 & 0
\end{pmatrix}+\epsilon\begin{pmatrix}1 & 0\\
0 & -1
\end{pmatrix}.
\end{align*}

\end_inset

As 
\begin_inset Formula $\mathbb{D}\SU\left(2\right)$
\end_inset

 is isomorphic to 
\begin_inset Formula $\mathbb{D}S^{3}$
\end_inset

 (dual unit quaternions), the generators for dual quaternions are given
 by
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
J_{1} & =i & J_{2} & =j & J_{3} & =k\\
J_{4} & =\epsilon i & J_{5} & =\epsilon j & J_{5} & =\epsilon k.
\end{align*}

\end_inset

By this point, we should already be able to tell that the 
\begin_inset Formula $\left(\cdot\right)^{\wedge}$
\end_inset

 operator for these groups is given by 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{pmatrix}\w\\
\v
\end{pmatrix}^{\wedge}=\begin{pmatrix}\w & \w_{x}-\w_{y}i\\
\w_{x}+\w_{y}i & \w_{z}
\end{pmatrix}+\epsilon\begin{pmatrix}\v_{z} & \v_{x}-\v_{y}i\\
\v_{x}+\v_{y}i & \v_{z}
\end{pmatrix}
\]

\end_inset

for 
\begin_inset Formula $\mathbb{D}\SU\left(2\right)$
\end_inset

 and 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{pmatrix}\w\\
\v
\end{pmatrix}^{\wedge}=\begin{pmatrix}0\\
\w
\end{pmatrix}+\epsilon\begin{pmatrix}0\\
\v
\end{pmatrix}
\]

\end_inset

for 
\begin_inset Formula $\mathbb{D}\S^{3}$
\end_inset

.
\end_layout

\begin_layout Section
Computing the Matrix Exponential
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:matrix_exp_closed_form"

\end_inset


\end_layout

\begin_layout Standard
Now that we have introduced the primary four 3D Lie groups used in our field,
 the rest of this document focuses on making efficient implementations in
 software.
 We'll start in this section by deriving closed-form expressions for the
 exponential and logarithm of each group.
 The next section focuses on the Adjoint, and computing Jacobians of expressions
 involving Lie group operations.
\end_layout

\begin_layout Standard
As noted in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:matrix_exp_intro"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the matrix exponential is defined with an infinite series.
 Given a square matrix 
\begin_inset Formula $A$
\end_inset

, the matrix exponential of 
\begin_inset Formula $A$
\end_inset

 is defined as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\exp\left(A\right) & =I+A+\frac{1}{2}A^{2}+\frac{1}{6}A^{3}+\cdots\\
 & =\sum_{k=0}^{\infty}\frac{1}{k!}A^{k}.
\end{align*}

\end_inset

and the matrix logarithm is defined as the inverse operation.
 
\end_layout

\begin_layout Standard
If you wanted to, you could just go ahead and compute this series up to
 a high enough order, and you would get the right answer
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
In fact, this is a really great way to check your implementation for accuracy.
\end_layout

\end_inset

.
 However, for all of the Lie groups discussed above, the matrix exponential
 has a closed form that make computing it much, much faster.
 In this section, we will derive these forms for each of the Groups discussed.
\end_layout

\begin_layout Standard
Disclaimer: this section is going to be a bit dry, as it is pretty much
 entirely nitty-gritty algebra.
 You may want to just skip to the section you're most interested in.
\end_layout

\begin_layout Subsection
Closed-Form Matrix Exponential for 
\begin_inset Formula $\SO\left(3\right)$
\end_inset


\end_layout

\begin_layout Standard
We know that the combination of the generators will give us a skew-symmetric
 matrix, therefore the matrix exponential of 
\begin_inset Formula $\so\left(3\right)$
\end_inset

 will look like
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\exp\left(\skew{\w}\right) & =I+\skew{\w}+\frac{1}{2!}\skew{\w}^{2}+\frac{1}{3!}\skew{\w}^{3}+\cdots.
\end{align*}

\end_inset

If we collect the even and odd pairs together, we will get
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\exp\left(\skew{\w}\right)=I+\sum_{k=0}^{\infty}\left[\frac{\skew{\w}^{2k+1}}{\left(2k+1\right)!}+\frac{\skew{\w}^{2k+2}}{\left(2k+2\right)!}\right],
\]

\end_inset

and we use the property of skew-symmetric matrices that
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\skew{\w}^{3}=-\norm{\w}^{2}\skew{\w},
\]

\end_inset

then we can rewrite the coefficients of this series in terms of the norm
 of 
\begin_inset Formula $\w$
\end_inset

 squared and 
\begin_inset Formula $\skew w$
\end_inset

 as
\begin_inset Formula 
\begin{align*}
\theta^{2} & =\w^{\top}\w\\
\skew{\w}^{2k+1} & =\left(-1\right)^{k}\theta^{2k}\skew{\w}\\
\skew{\w}^{2k+2} & =\left(-1\right)^{k}\theta^{2k}\skew{\w}^{2}.
\end{align*}

\end_inset

Let's plug these coefficients back into the equation and munge around a
 little bit, factoring out the 
\begin_inset Formula $\skew{\w}$
\end_inset

 and 
\begin_inset Formula $\skew{\w}^{2}$
\end_inset

 terms until we get
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\exp\left(\skew{\w}\right) & =I+\sum_{k=0}^{\infty}\left(\frac{\left(-1\right)^{k}\theta^{2k}\skew{\w}}{\left(2k+1\right)!}\right)+\sum_{k=0}^{\infty}\left(\frac{\left(-1\right)^{k}\theta^{2k}\skew{\w}^{2}}{\left(2k+2\right)!}\right)\nonumber \\
 & =I+\sum_{k=0}^{\infty}\left(\frac{\left(-1\right)^{k}\theta^{2k}}{\left(2k+1\right)!}\right)\skew{\w}+\sum_{k=0}^{\infty}\left(\frac{\left(-1\right)^{k}\theta^{2k}}{\left(2k+2\right)!}\right)\skew{\w}^{2}\nonumber \\
 & =I+\left(1-\frac{\theta^{2}}{3!}+\frac{\theta^{4}}{5!}+\cdots\right)\skew{\w}+\left(\frac{1}{2!}-\frac{\theta^{2}}{4!}+\frac{\theta^{4}}{6!}+\cdots\right)\skew{\w}^{2}.\label{eq:rodrigues_taylor_series}
\end{align}

\end_inset

At this point, we can refer to Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:taylor_series"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and recognize the sinc function and a cosine-related function.
 We can plug these expressions into Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:rodrigues_taylor_series"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and get the well-known Rodrigues formula,
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\boxed{\exp\left(\skew{\w}\right)=I+\left(\frac{\sin\left(\theta\right)}{\theta}\right)\skew{\w}+\left(\frac{1-\cos\left(\theta\right)}{\theta^{2}}\right)\skew{\w}^{2}.}\label{eq:so3_exp}
\end{equation}

\end_inset

This formula will have numerical problems if 
\begin_inset Formula $\theta\approx0,$
\end_inset

 so best practice is to use the Taylor series version with two or three
 terms if you've got a small 
\begin_inset Formula $\theta.$
\end_inset

 
\end_layout

\begin_layout Standard
Now, if you wanted to compute the matrix logarithm for 
\begin_inset Formula $\SO\left(3\right),$
\end_inset

 you can just compute the inverse of Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:so3_exp"
plural "false"
caps "false"
noprefix "false"

\end_inset

, as 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\begin{array}{cc}
\log\left(R\right) & =\frac{\theta}{2\sin\theta}\left(R-R^{\top}\right),\end{array}}
\]

\end_inset

where
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\theta=\cos^{-1}\left(\frac{\textrm{tr}\left(R\right)-1}{2}\right).
\]

\end_inset


\end_layout

\begin_layout Standard
This equation has two points where numerical issues come into play, the
 first is when 
\begin_inset Formula $\theta\approx0,$
\end_inset

 the other is when 
\begin_inset Formula $\theta\approx\pi$
\end_inset

.
 As with Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:so3_exp"
plural "false"
caps "false"
noprefix "false"

\end_inset

, just use the Taylor series of 
\begin_inset Formula $\log\left(R\right)$
\end_inset

 if 
\begin_inset Formula $\theta$
\end_inset

 is close to these values (See Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:taylor_series"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Subsection
Closed-Form Exponential for 
\begin_inset Formula $\S^{3}$
\end_inset


\end_layout

\begin_layout Standard
Let's start with the definition of the quaternion exponential
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\exp\left(\w^{\wedge}\right) & =\sum_{k=0}^{\infty}\frac{\left(\w^{\wedge}\right)^{k}}{k!}, & \w^{\wedge} & =\begin{pmatrix}0\\
\w
\end{pmatrix}\label{eq:quat_exp_series}
\end{align}

\end_inset

where the term 
\begin_inset Formula $\left(\q\right)^{k}$
\end_inset

 refers to multiplying 
\begin_inset Formula $\q$
\end_inset

 with itself 
\begin_inset Formula $\left(\q\cdot\q\cdot\cdots\right)$
\end_inset

 
\begin_inset Formula $k$
\end_inset

 times.
 We also note that
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\left(\w^{\wedge}\right)^{2} & =\left(\w_{x}i+\w_{y}j+\w_{z}k\right)\cdot\left(\w_{x}i+\w_{y}j+\w_{z}k\right)\\
 & =-\w_{x}^{2}-\w_{d}^{2}-\w_{z}^{2}\\
 & =-\norm{\w}^{2}
\end{align*}

\end_inset

Therefore, if 
\begin_inset Formula $\theta=\norm{\w}$
\end_inset

, then
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\left(\w^{\wedge}\right)^{2} & =-\theta^{2}, & \left(\w^{\wedge}\right)^{3} & =-\theta^{2}\w^{\wedge} & \left(\w^{\wedge}\right)^{4} & =\theta^{4}\cdots.
\end{align*}

\end_inset

Now, we can rewrite the series in Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:quat_exp_series"
plural "false"
caps "false"
noprefix "false"

\end_inset

 as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\exp\left(\w^{\wedge}\right) & =\sum_{k=0}^{\infty}\frac{\left(\w^{\wedge}\right)^{k}}{k!}\nonumber \\
 & =1+\w^{\wedge}-\frac{\theta^{2}}{2!}-\frac{\theta^{2}}{3!}\w^{\wedge}+\frac{\theta^{4}}{4!}+\frac{\theta^{4}}{5!}\w^{\wedge}-\cdots\nonumber \\
 & =1+\frac{\theta}{\theta}\w^{\wedge}-\frac{\theta^{2}}{2!}-\frac{\theta^{3}}{3!\theta}\w^{\wedge}+\frac{\theta^{4}}{4!}+\frac{\theta^{5}}{5!\theta}\w^{\wedge}-\cdots\nonumber \\
 & =\left(1-\frac{\theta^{2}}{2!}+\frac{\theta^{4}}{4!}\cdots\right)+\frac{1}{\theta}\left(\theta-\frac{\theta^{3}}{3!}+\frac{\theta^{5}}{5!}\cdots\right)\w^{\wedge}\nonumber \\
 & =\cos\left(\theta\right)+\frac{\sin\left(\theta\right)}{\theta}\w^{\wedge}.\label{eq:quat_exp}
\end{align}

\end_inset

As with the rotation matrix exponential, we will want to use the Taylor
 series approximation if 
\begin_inset Formula $\theta\approx0$
\end_inset

 to avoid numerical errors.
 (See Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:taylor_series"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
\end_layout

\begin_layout Standard
Computing the closed-form logarithm is done by inverting Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:quat_exp"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and is given by
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\log\left(\q\right)=\textrm{atan2}\left(\norm{\vec{\q}},q_{0}\right)\frac{\q}{\norm{\vec{\q}}}.
\]

\end_inset

Because of the fact that quaternion dynamics have a 
\begin_inset Formula $\frac{1}{2}$
\end_inset

 in front of them (See Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:quaternion_dynamics"
plural "false"
caps "false"
noprefix "false"

\end_inset

), it is common practice in both physics and robotics applications to embed
 the 
\begin_inset Formula $\frac{1}{2}$
\end_inset

 into the 
\begin_inset Formula $\exp$
\end_inset

 function itself such that
\begin_inset Foot
status open

\begin_layout Plain Layout
You might recognize this as the axis-angle conversion to unit quaternions
 (Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:quat_axis_angle"
plural "false"
caps "false"
noprefix "false"

\end_inset

)
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\exp\left(\w\right)=\cos\left(\frac{\norm{\w}}{2}\right)+\sin\left(\frac{\norm{\w}}{2}\right)\frac{\w}{\norm{\w}}}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\log\left(\q\right)=2\tan^{-1}\left(\frac{\norm{\vec{\q}}}{q_{0}}\right)\cdot\frac{\vec{\q}}{\norm{\vec{\q}}}.}
\]

\end_inset

This is actually the same as if we redefined the generators of the unit
 quaternion to all be 
\begin_inset Formula $\frac{1}{2}J_{i}$
\end_inset

.
 This is fine, and totally proper, however we just need to be explicit about
 this choice.
\end_layout

\begin_layout Subsection
Closed-Form Matrix Exponential for 
\begin_inset Formula $\SE\left(3\right)$
\end_inset


\end_layout

\begin_layout Standard
To derive the closed-form expression for the matrix exponential of 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

 we start with the series expression for the matrix exponential and play
 with it until we can find patterns we can convert into known expressions.
 In the case of 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

, this procedure starts out as follows:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\exp\begin{pmatrix}\skew{\w} & \v\\
0 & 1
\end{pmatrix} & =I+\begin{pmatrix}\skew{\w} & \v\\
0 & 1
\end{pmatrix}+\frac{1}{2!}\begin{pmatrix}\skew{\w} & \v\\
0 & 1
\end{pmatrix}^{2}+\frac{1}{3!}\begin{pmatrix}\skew{\w} & \v\\
0 & 1
\end{pmatrix}^{3}+\cdots\\
 & =I+\begin{pmatrix}\skew{\w} & \v\\
0 & 1
\end{pmatrix}+\frac{1}{2!}\begin{pmatrix}\skew{\w}^{2} & \skew{\w}\v\\
0 & 1
\end{pmatrix}+\frac{1}{3!}\begin{pmatrix}\skew{\w}^{3} & \skew{\w}^{2}\v\\
0 & 1
\end{pmatrix}+\cdots\\
 & =\begin{pmatrix}\exp\left(\skew{\w}\right) & V\v\\
0 & 1
\end{pmatrix}\\
V & =I+\frac{1}{2}\skew{\w}+\frac{1}{3!}\skew{\w}^{2}.
\end{align*}

\end_inset

At this point, we can see that the upper right block is just the rotation
 matrix, but we have this matrix 
\begin_inset Formula $V$
\end_inset

 that couples some amount of angular rate in with linear velocity.
 This is the term that describes the screw motions we expect from this exponenti
al map.
 We can find a closed-form expression for 
\begin_inset Formula $V$
\end_inset

 by splitting the even and odd pairs which leads to:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
V & =I+\sum_{k=0}^{\infty}\left(\frac{\skew{\w}^{\left(2k+1\right)}}{\left(2k+2\right)!}+\frac{\skew{\w}^{\left(2k+2\right)}}{\left(2k+3\right)!}\right)\\
 & =I+\sum_{k=0}^{\infty}\left(\frac{\left(-1\right)^{k}\theta^{2k}}{\left(2k+2\right)!}\right)\skew{\w}+\sum_{k=0}^{\infty}\left(\frac{\left(-1\right)^{k}\theta^{2k}}{\left(2k+3\right)!}\right)\skew{\w}^{2}\\
 & =I+\left(\frac{1}{2}-\frac{\theta^{2}}{4!}+\frac{\theta^{4}}{6!}+\cdots\right)\skew{\w}+\left(\frac{1}{3!}-\frac{\theta^{2}}{5!}+\frac{\theta^{4}}{7!}+\cdots\right)\skew{\w}^{2}\\
 & =I+\left(\frac{1-\cos\left(\theta\right)}{\theta^{2}}\right)\skew{\w}+\left(\frac{\theta-\sin\left(\theta\right)}{\theta^{3}}\right)\skew{\w}^{2}.
\end{align*}

\end_inset

In summary, the final form for the matrix exponential is given as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\exp\begin{pmatrix}\skew{\w} & \v\\
0 & 1
\end{pmatrix}=\begin{pmatrix}\exp\left(\skew{\w}\right) & V\v\\
0 & 1
\end{pmatrix},}
\]

\end_inset

where 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
V=I+\left(\frac{1-\cos\left(\theta\right)}{\theta^{2}}\right)\skew{\w}+\left(\frac{\theta-\sin\left(\theta\right)}{\theta^{3}}\right)\skew{\w}^{2},
\]

\end_inset

and the logarithm has this closed-form:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\log\begin{pmatrix}R & \t\\
0 & 1
\end{pmatrix}=\begin{pmatrix}\log\left(R\right) & V^{-1}\t\\
0 & 0
\end{pmatrix},}
\]

\end_inset

where 
\begin_inset Formula 
\[
V^{-1}=I-\frac{1}{2}\skew{\w}+\frac{1}{\theta^{2}}\left(1-\frac{\theta\sin\theta}{2\left(1-\cos\theta\right)}\right)\skew{\w}^{2}.
\]

\end_inset


\end_layout

\begin_layout Standard
As with the other results in this document, Taylor series expansions for
 the numerically unstable trigonometric terms can be found in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:taylor_series"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Subsection
Closed-Form Exponential for 
\begin_inset Formula $\mathbb{D}\S^{3}$
\end_inset


\end_layout

\begin_layout Standard
To derive the exponential map of the dual quaternion, we start with the
 exponential map for the ordinary quaternion, except with dual numbers.
 For some syntactical relief, I'm going to abuse notation a little bit and
 define 
\begin_inset Formula $\w$
\end_inset

 and 
\begin_inset Formula $\v$
\end_inset

 as pure quaternions and use the 
\begin_inset Formula $\tilde{\left(\cdot\right)}$
\end_inset

 syntax to remind us that a value has both real and dual components.
 The dual exponential map is given as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\exp\left(\w+\epsilon\v\right) & =\cos\left(\frac{\tilde{\phi}}{2}\right)+\sin\left(\frac{\tilde{\phi}}{2}\right)\frac{\left(\w+\epsilon\v\right)}{\tilde{\phi}} & \tilde{\phi} & =\norm{\w+\epsilon\v}.\label{eq:dual_quat_exp_1}
\end{align}

\end_inset

This is absolutely correct, but unwieldy.
 Let's use the identities from Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:dual_trig_functions"
plural "false"
caps "false"
noprefix "false"

\end_inset

 to break this into the real and dual parts.
 First the dual angle can be re-written as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\tilde{\phi} & =\sqrt{\left(\w+\epsilon\v\right)^{\top}\left(\w+\epsilon\v\right)}\\
 & =\sqrt{\left(\w\right)^{\top}\left(\w\right)+\epsilon2\w^{\top}\v}\\
 & =\sqrt{\w^{\top}\w}+\frac{\w^{\top}\v}{\sqrt{\w^{\top}\w}}\epsilon\\
 & =\theta+\frac{\gamma}{\theta}\epsilon.
\end{align*}

\end_inset

where 
\begin_inset Formula $\theta$
\end_inset

 is the angle of rotation that we saw for the ordinary quaternion and 
\begin_inset Formula $\gamma$
\end_inset

 is 
\begin_inset Formula $\w^{\top}\v$
\end_inset

.
 With this result, we can now split the dual sin and cos functions as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\cos\left(\frac{\tilde{\phi}}{2}\right) & =\cos\left(\frac{\theta}{2}+\epsilon\frac{\gamma}{2\theta}\right)\\
 & =\cos\frac{\theta}{2}-\epsilon\frac{\gamma}{2\theta}\sin\frac{\theta}{2}\\
\sin\left(\frac{\tilde{\phi}}{2}\right) & =\sin\frac{\theta}{2}+\epsilon\frac{\gamma}{2\theta}\cos\frac{\theta}{2},
\end{align*}

\end_inset

and the sinc-like function expands as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\frac{\sin\frac{\tilde{\phi}}{2}}{\tilde{\phi}} & =\frac{\sin\frac{\theta}{2}+\epsilon\frac{\gamma}{2\theta}\cos\frac{\theta}{2}}{\theta+\frac{\gamma}{\theta}\epsilon}\\
 & =\frac{\sin\frac{\theta}{2}+\epsilon\frac{\gamma}{2\theta}\cos\frac{\theta}{2}}{\theta+\frac{\gamma}{\theta}\epsilon}\left(\frac{\theta-\frac{\gamma}{\theta}\epsilon}{\theta-\frac{\gamma}{\theta}\epsilon}\right)\\
 & =\frac{\theta\sin\frac{\theta}{2}+\epsilon\left(\frac{\gamma}{2\theta}\theta\cos\frac{\theta}{2}-\frac{\gamma}{\theta}\sin\frac{\theta}{2}\right)}{\theta^{2}}\\
 & =\frac{\sin\frac{\theta}{2}}{\theta}+\epsilon\gamma\left(\frac{\frac{1}{2}\cos\frac{\theta}{2}-\frac{\sin\frac{\theta}{2}}{\theta}}{\theta^{2}}\right).
\end{align*}

\end_inset

We can finally expand and factor Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:dual_quat_exp_1"
plural "false"
caps "false"
noprefix "false"

\end_inset

 into the real and dual components as follows
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\exp\left(\w+\epsilon\v\right) & =\cos\frac{\tilde{\phi}}{2}+\frac{\sin\frac{\tilde{\phi}}{2}}{\tilde{\phi}}\left(\w+\epsilon\v\right)\\
 & =\left(\cos\frac{\theta}{2}-\epsilon\frac{\gamma}{2\theta}\sin\frac{\theta}{2}\right)+\left(\frac{\sin\frac{\theta}{2}}{\theta}+\epsilon\gamma\left(\frac{\frac{1}{2}\cos\frac{\theta}{2}-\frac{\sin\frac{\theta}{2}}{\theta}}{\theta^{2}}\right)\right)\left(\w+\epsilon\v\right)\\
 & =\left(\cos\frac{\theta}{2}-\epsilon\frac{\gamma}{2\theta}\sin\frac{\theta}{2}\right)+\left(\frac{\sin\frac{\theta}{2}}{\theta}\w+\epsilon\left(\gamma\left(\frac{\frac{1}{2}\cos\frac{\theta}{2}-\frac{\sin\frac{\theta}{2}}{\theta}}{\theta^{2}}\right)\w+\frac{\sin\frac{\theta}{2}}{\theta}\v\right)\right)\\
 & =\left(\cos\frac{\theta}{2}+\frac{\sin\frac{\theta}{2}}{\theta}\w\right)+\epsilon\left(-\frac{\gamma}{2\theta}\sin\frac{\theta}{2}+\gamma\left(\frac{\frac{1}{2}\cos\frac{\theta}{2}-\frac{\sin\frac{\theta}{2}}{\theta}}{\theta^{2}}\right)\w+\frac{\sin\frac{\theta}{2}}{\theta}\v\right)
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\exp\left(\w+\epsilon\v\right)=\begin{pmatrix}\cos\frac{\theta}{2}\\
\frac{\sin\frac{\theta}{2}}{\theta}\w
\end{pmatrix}+\epsilon\begin{pmatrix}-\frac{\gamma}{2\theta}\sin\frac{\theta}{2}\\
\gamma\left(\frac{\frac{1}{2}\cos\frac{\theta}{2}-\frac{\sin\frac{\theta}{2}}{\theta}}{\theta^{2}}\right)\w+\frac{\sin\frac{\theta}{2}}{\theta}\v
\end{pmatrix},}
\]

\end_inset

which is the final form of the matrix exponential for the dual quaternion
 representation.
 
\end_layout

\begin_layout Standard
In similar fashion, we can derive the dual quaternion logarithm by expanding
 the dual form of the ordinary quaternion expression.
 We start with the ordinary quaternion logarithm
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\log\left(\qq\right)=2\tan^{-1}\left(\frac{\norm{\tilde{\vec{\q}}}}{\tilde{q_{0}}}\right)\frac{\tilde{\vec{\q}}}{\norm{\tilde{\vec{\q}}}},
\]

\end_inset

which can now separate into real and dual parts.
 
\end_layout

\begin_layout Standard
First, let us start by separating the expression for the norm of the dual
 quaternion imaginary component.
 For this derivation, I have defined
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\r & =\vec{\q}_{r} & r_{0} & =q_{r0} & \d & =\vec{\q}_{d} & d_{0} & =q_{d0}
\end{align*}

\end_inset

to clean up the expressions somewhat.
 Let's start first with the norm of the dual complex portion:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\norm{\tilde{\vec{\q}}} & =\sqrt{\left(\r+\epsilon\d\right)^{\top}\left(\r+\epsilon\d\right)}\\
 & =\sqrt{\r^{\top}\r+\epsilon2\r^{\top}\d}\\
 & =\sqrt{\r^{\top}\r}+\frac{\gamma}{\sqrt{\r^{\top}\r}}\epsilon & \grey{\gamma} & \grey{=\r^{\top}\d}\\
 & =\theta+\frac{\gamma}{\theta}\epsilon. & \grey{\theta} & \grey{=\sqrt{\r^{\top}\r}},
\end{align*}

\end_inset

We can use this to separate the argument of the arc-tangent function
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\frac{\norm{\tilde{\vec{\q}}}}{\tilde{q}_{0}} & =\frac{\theta+\frac{\gamma}{\theta}\epsilon}{r_{0}+\epsilon d_{0}}\\
 & =\frac{\theta+\frac{\gamma}{\theta}\epsilon}{r_{0}+\epsilon d_{0}}\left(\frac{r_{0}-\epsilon d_{0}}{r_{0}-\epsilon d_{0}}\right)\\
 & =\frac{r_{0}\theta}{r_{0}^{2}}+\epsilon\frac{\left(r_{0}\frac{\gamma}{\theta}-d_{0}\theta\right)}{r_{0}^{2}}\\
 & =\frac{\theta}{r_{0}}+\epsilon\frac{\left(r_{0}\frac{\gamma}{\theta}-d_{0}\theta\right)}{r_{0}^{2}},
\end{align*}

\end_inset

the screw angle:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\tan^{-1}\left(\frac{\norm{\tilde{\bar{\q}}}}{\tilde{q}_{0}}\right) & =\tan^{-1}\left(\frac{\theta}{r_{0}}+\epsilon\frac{\left(r_{0}\frac{\gamma}{\theta}-d_{0}\theta\right)}{r_{0}^{2}}\right)\\
 & =\tan^{-1}\left(\frac{\theta}{r_{0}}\right)+\epsilon\left(\frac{\frac{\left(r_{0}\frac{\gamma}{\theta}-d_{0}\theta\right)}{r_{0}^{2}}}{\left(\frac{\theta}{r_{0}}\right)^{2}+1}\right)\\
 & =\tan^{-1}\left(\frac{\theta}{r_{0}}\right)+\epsilon\left(\frac{\frac{\left(r_{0}\frac{\gamma}{\theta}-d_{0}\theta\right)}{r_{0}^{2}}}{\frac{\theta^{2}+r_{0}^{2}}{r_{0}^{2}}}\right)\\
 & =\tan^{-1}\left(\frac{\theta}{r_{0}}\right)+\epsilon\left(r_{0}\frac{\gamma}{\theta}-d_{0}\theta\right), & \grey{\left(\theta^{2}+r_{0}^{2}=1\right)}
\end{align*}

\end_inset

and the screw axis:
\begin_inset Formula 
\begin{align*}
\frac{\tilde{\bar{\q}}}{\norm{\tilde{\bar{\q}}}} & =\frac{\r+\epsilon\d}{\theta+\frac{\gamma}{\theta}\epsilon}\\
 & =\frac{\r+\epsilon\d}{\theta+\frac{\gamma}{\theta}\epsilon}\left(\frac{\theta-\frac{\gamma}{\theta}\epsilon}{\theta-\frac{\gamma}{\theta}\epsilon}\right)\\
 & =\frac{\r}{\theta}+\epsilon\frac{\d\theta-\frac{\gamma}{\theta}\r}{\theta^{2}}.
\end{align*}

\end_inset

With these expressions, we can write the full form of the dual quaternion
 logarithm as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\log\left(\qq\right) & =2\tan^{-1}\left(\norm{\tilde{\bar{\q}}},\tilde{q_{0}}\right)\frac{\tilde{\bar{\q}}}{\norm{\tilde{\bar{\q}}}}\\
 & =2\left(\tan^{-1}\left(\frac{\theta}{r_{0}}\right)+\epsilon\left(r_{0}\frac{\gamma}{\theta}-d_{0}\theta\right)\right)\left(\frac{\r}{\theta}+\epsilon\frac{\d\theta-\frac{\gamma}{\theta}\r}{\theta^{2}}\right)\\
 & =2\left(\frac{\r}{\theta}\tan^{-1}\left(\frac{\theta}{r_{0}}\right)\right)+2\epsilon\left(\tan^{-1}\left(\frac{\theta}{r_{0}}\right)\left(\frac{\d\theta-\frac{\gamma}{\theta}\r}{\theta^{2}}\right)+\left(r_{0}\frac{\gamma}{\theta}-d_{0}\theta\right)\frac{\r}{\theta}\right)\\
 & =2\left(\frac{\tan^{-1}\left(\frac{\theta}{r_{0}}\right)}{\theta}\r\right)+2\epsilon\left(\frac{\tan^{-1}\left(\frac{\theta}{r_{0}}\right)}{\theta}\left(\d-\frac{\gamma}{\theta^{2}}\r\right)+\left(r_{0}\frac{\gamma}{\theta^{2}}-d_{0}\right)\r\right).
\end{align*}

\end_inset

Again, to make things a little more compact, we can define
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
a & =\frac{\tan^{-1}\left(\frac{\theta}{r_{0}}\right)}{\theta}, & b & =\frac{\gamma}{\theta^{2}},
\end{align*}

\end_inset

and simplify the expression above to get
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\log\left(\qq\right) & =2\left(a\r+\epsilon\left(a\left(\d-b\r\right)+\left(r_{0}b-d_{0}\right)\r\right)\right)\\
 & =2a\r+2\epsilon\left(a\d+\left(\left(r_{0}-a\right)b-d_{0}\right)\r\right).
\end{align*}

\end_inset

This gives us the final form of the logarithm for the dual quaternion:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\log\left(\qq\right)=2\begin{pmatrix}a\r\\
a\d+\left(\left(r_{0}-a\right)b-d_{0}\right)\r
\end{pmatrix}.}
\]

\end_inset


\end_layout

\begin_layout Standard
To deal with the case that 
\begin_inset Formula $\theta$
\end_inset

 is small, we have to re-arrange the expression so we can find a numerically
 stable Taylor series expression
\begin_inset CommandInset citation
LatexCommand cite
key "Dantam2018"
literal "false"

\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\log\left(\qq\right) & =2a\r+2\epsilon\left(a\d+\left(\left(r_{0}-a\right)b-d_{0}\right)\r\right)\\
 & =2a\r+2\epsilon\left(\frac{\tan^{-1}\left(\frac{\theta}{r_{0}}\right)}{\theta}\d+\left(\left(r_{0}-\frac{\tan^{-1}\left(\frac{\theta}{r_{0}}\right)}{\theta}\right)\frac{\gamma}{\theta^{2}}-d_{0}\right)\r\right)\\
 & =2a\r+2\epsilon\left(\frac{\tan^{-1}\left(\frac{\theta}{r_{0}}\right)}{\theta}\d+\left(\gamma\frac{\theta\cos\left(\frac{\theta}{2}\right)-\tan^{-1}\left(\frac{\theta}{r_{0}}\right)}{\theta^{3}}-d_{0}\right)\r\right) & \grey{\left(r_{0}=\cos\left(\frac{\theta}{2}\right)\right)}\\
 & =2a\r+2\epsilon\left(a\d+\left(\gamma\frac{\theta\cos\left(\frac{\theta}{2}\right)-\tan^{-1}\left(\frac{\theta}{r_{0}}\right)}{\theta^{3}}-d_{0}\right)\r\right).
\end{align*}

\end_inset

At this point, we can pump the nasty trig expression into Wolfram Alpha
 to get a useful Taylor series representation to use when 
\begin_inset Formula $\theta\approx0.$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\frac{\theta\cos\left(\frac{\theta}{2}\right)-\tan^{-1}\left(\frac{\theta}{r_{0}}\right)}{\theta^{3}}=\frac{5}{24}-\frac{379}{1920}\theta^{2}+\frac{46073}{322560}\theta^{4}-\frac{127431}{1146880}\theta^{6}
\]

\end_inset

The Taylor series expression for 
\begin_inset Formula $\frac{1}{\theta}\tan^{-1}\left(\frac{\theta}{r_{0}}\right)$
\end_inset

 is given in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:taylor_series"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 It should be noted that this equation is highly non-linear, which is why
 for this series I have added the 6th-order term.
\end_layout

\begin_layout Section
The Adjoint as the Jacobian of Group Action
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:ad_as_jacobian"

\end_inset


\end_layout

\begin_layout Standard
Most people's first introduction to calculus typically focuses on computing
 derivatives.
 For completeness, we're going to start here and work our way to computing
 Jacobians of the Lie Group action.
 The formula for computing the derivative of a scalar function 
\begin_inset Formula $f$
\end_inset

, is given as
\begin_inset Foot
status open

\begin_layout Plain Layout
Note, to be consistent with the vast majority of literature on this topic,
 I am using 
\begin_inset Formula $\varepsilon$
\end_inset

 to mean a small perturbation.
 This is a separate and distinct concept from 
\begin_inset Formula $\epsilon,$
\end_inset

 the dual number.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\frac{\partial f}{\partial x}=\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\left(f\left(x+\varepsilon\right)-f\left(x\right)\right).
\]

\end_inset

In conversational English, this means, 
\begin_inset Quotes eld
\end_inset

How does the output of the function 
\begin_inset Formula $f$
\end_inset

 change if I bump the input a tiny bit?
\begin_inset Quotes erd
\end_inset

 This is very naturally adapted for a vector function 
\begin_inset Formula $g\in\mathbb{R}^{m}\to\mathbb{R}^{n}$
\end_inset

 as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\frac{\partial g}{\partial\x} & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\dd_{1}\left(\x,\varepsilon\right) & \dd_{2}\left(\x,\varepsilon\right)\cdots\dd_{m}\left(\x,\varepsilon\right)\end{bmatrix}\in\mathbb{R}^{n\times m}\\
\dd_{i}\left(\x,\varepsilon\right) & =g\left(\x+\e_{i}\varepsilon\right)-g\left(\x\right)
\end{align*}

\end_inset

Again, in conversational English, we're saying that 
\begin_inset Formula $g$
\end_inset

 is a function that takes in 
\begin_inset Formula $m$
\end_inset

-vectors and produces 
\begin_inset Formula $n$
\end_inset

-vectors.
 We want to know what 
\begin_inset Formula $g$
\end_inset

 looks like along each of the input axes, so we're going to make a matrix
 where each column is the derivative along each of these directions.
 This is known as the Jacobian matrix, and can also be interpreted as, 
\begin_inset Quotes eld
\end_inset

If I change the input in some way, what does it do to the output?
\begin_inset Quotes erd
\end_inset

 For example, if I go further along the 
\begin_inset Formula $\e_{1}$
\end_inset

-axis, would I expect the output to go up or down? This would be captured
 in the first column of the Jacobian.
 This relationship lets us look at Jacobians as a sort of mapping from input
 space to output space, and lets us quickly compute how changes in input
 should affect the output of the function 
\begin_inset Formula $g$
\end_inset

.
\end_layout

\begin_layout Standard
The concept of differentiation works quite naturally with Lie groups as
 well.
 For example, consider the case of some function 
\begin_inset Formula $h\in\SE\left(3\right)\to\mathbb{R}^{n}.$
\end_inset

 What we want is a matrix that tells us how the output of 
\begin_inset Formula $h$
\end_inset

 behaves as we tweak the argument of 
\begin_inset Formula $h$
\end_inset

 along the 
\emph on
generators 
\emph default
of 
\begin_inset Formula $\se\left(3\right).$
\end_inset

 To compute this, we use the fact that every member of the group can be
 described by the exponential of some linear combination of generators,
 as in
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
T & =\exp\left(\x^{\wedge}\right), & \x^{\wedge} & =\log\left(T\right).
\end{align*}

\end_inset

When we write it this way, we can see how we might perturb 
\begin_inset Formula $\x$
\end_inset

 (and therefore, 
\begin_inset Formula $T$
\end_inset

) in the 
\begin_inset Formula $J_{i}$
\end_inset

 direction:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
T_{i}^{+} & =\exp\left(\x^{\wedge}+J_{i}\varepsilon\right)\\
 & =T\cdot\exp\left(J_{i}\varepsilon\right).
\end{align*}

\end_inset

Next, we need to think about how we might compute the difference between
 
\begin_inset Formula $T_{i}^{+}$
\end_inset

 and the original 
\begin_inset Formula $T$
\end_inset

.
 Again, looking to the Lie Algebra, we should expect the difference 
\begin_inset Formula $\dd_{i}\in\se\left(3\right)$
\end_inset

 to be
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
\exp\left(\dd_{i}\right) & =T\cdot\exp\left(J_{i}\varepsilon\right)\cdot\exp\left(-\x^{\wedge}\right)\nonumber \\
\dd_{i} & =\log\left(T\cdot\exp\left(J_{i}\varepsilon\right)\cdot T^{-1}\right)^{\vee}.\label{eq:adjoint_start}
\end{align}

\end_inset

If we make a matrix out of the six 
\begin_inset Formula $\dd_{i}$
\end_inset

 for 
\begin_inset Formula $\se\left(3\right)$
\end_inset

, take the limit as 
\begin_inset Formula $\varepsilon\to0$
\end_inset

 and attach coordinate frames to our transform 
\begin_inset Formula $T_{a}^{b}$
\end_inset

, then we get a 
\begin_inset Formula $6\times6$
\end_inset

 matrix that tells us how things change along the generators in the 
\begin_inset Formula $b$
\end_inset

 frame if we perturb along the generators the 
\begin_inset Formula $a$
\end_inset

 frame.
 This has a special namethe Adjointand it just so happens to be the Jacobian
 of the group action by a member of the group.
\end_layout

\begin_layout Standard
We can come at the Adjoint in another way: because the Adjoint is the Jacobian
 of the group action of a Lie group, we can use it to map vectors from the
 
\begin_inset Quotes eld
\end_inset

output
\begin_inset Quotes erd
\end_inset

 of a group action to the 
\begin_inset Quotes eld
\end_inset

input
\begin_inset Quotes erd
\end_inset

, and vice-versa.
 In mathematical terms
\begin_inset Foot
status open

\begin_layout Plain Layout
for the rest of this section, I'm dropping the 
\begin_inset Formula $\left(\cdot\right)^{\wedge}$
\end_inset

 so we can focus on the coordinate frame notation.
 The mapping from the vector to algebra should be implied by context.
\end_layout

\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
T\cdot\exp\left(\dd\right)=\exp\left(\Ad_{T}\cdot\dd\right)\cdot T.
\]

\end_inset

See how we have 
\begin_inset Quotes eld
\end_inset

moved
\begin_inset Quotes erd
\end_inset

 
\begin_inset Formula $\dd$
\end_inset

 from the 
\begin_inset Quotes eld
\end_inset

input
\begin_inset Quotes erd
\end_inset

 of 
\begin_inset Formula $T$
\end_inset

 (the right side) to the 
\begin_inset Quotes eld
\end_inset

output
\begin_inset Quotes erd
\end_inset

 (the left side)? If we attach coordinate frames to 
\begin_inset Formula $T$
\end_inset

 this becomes even more clear: 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
T_{a}^{b}\cdot\exp\left(\dd^{a}\right) & =\exp\left(\Ad\left(T_{a}^{b}\right)\cdot\dd^{a}\right)\cdot T_{a}^{b}.\nonumber \\
 & =\exp\left(\dd^{b}\right)\cdot T_{a}^{b}.\label{eq:adjoint_show}
\end{align}

\end_inset

The Adjoint transforms 
\begin_inset Formula $\dd$
\end_inset

 from 
\begin_inset Formula $a$
\end_inset

 to 
\begin_inset Formula $b.$
\end_inset


\end_layout

\begin_layout Standard
Remember all that talk about left-invariance and right-invariance? This
 property of the Adjoint of the Lie Group lets us swap back and forth however
 we need to.
 This is really helpful when computing Jacobians of complex expressions
 involving Lie Groups.
\end_layout

\begin_layout Section
Closed-Form Expressions for the Adjoint
\end_layout

\begin_layout Standard
In this section, I'm going to derive the Adjoint for each of our four Lie
 Groups, but before we do that,
\emph on
 
\emph default
let's first talk about a concrete example of where the Adjoint is useful.
 
\end_layout

\begin_layout Standard
Let's consider some kind of nonlinear controller that is computing error
 on the Lie Algebra of 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

, where we have some desired state 
\begin_inset Formula $\check{T}$
\end_inset

 and our current state 
\begin_inset Formula $T.$
\end_inset

 We're going to form some control law around the error between these two
 states.
 Naturally, we want to use linear algebra as the backbone of our implementation,
 so we'd like to use 
\begin_inset Formula $\se\left(3\right)^{\vee}$
\end_inset

 to represent our error.
 We could compute the error in one of 4 ways:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\dd_{a}^{\check{a}} & =\log\left(\check{\left(T_{a}^{b}\right)}^{-1}\cdot T_{a}^{b}\right)\\
\dd_{b}^{\check{b}} & =\log\left(\check{T_{a}^{b}}\cdot\left(T_{a}^{b}\right)^{-1}\right)\\
\dd_{\check{a}}^{a} & =\log\left(\left(T_{a}^{b}\right)^{-1}\cdot\check{T_{a}^{b}}\right)\\
\dd_{\check{b}}^{b} & =\log\left(\left(T_{a}^{b}\right)\cdot\left(\check{T}_{a}^{b}\right)^{-1}\right).
\end{align*}

\end_inset

The choice of error depends largely on which frames are moving, and which
 are not.
 Let's assume that in this case the 
\begin_inset Formula $a$
\end_inset

 frame is shared between the transform (i.e.
 perhaps 
\begin_inset Formula $a$
\end_inset

 refers to the inertial frame), and that the 
\begin_inset Formula $b$
\end_inset

 and 
\begin_inset Formula $\check{b}$
\end_inset

 frames are the current and desired body frame of a robot.
 The goal of the controller in this case is to make 
\begin_inset Formula $b=\check{b}.$
\end_inset

 In this case, it makes the most sense to define our error as one of the
 following two options (or else the coordinate frames will not match up):
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\dd_{b}^{\check{b}} & =\log\left(\check{T_{a}^{b}}\cdot\left(T_{a}^{b}\right)^{-1}\right),\\
\dd_{\check{b}}^{b} & =\log\left(T_{a}^{b}\cdot\left(\check{T}_{a}^{b}\right)^{-1}\right).
\end{align*}

\end_inset

Driving either of these errors to zero will achieve our control objectives.
 However, watch what happens when we want to compute the Jacobian of our
 error with respect to our current state.
 We can find these Jacobians using the chain rule: 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\frac{\partial}{\partial T_{a}^{b}}\dd_{b}^{\check{b}} & =\left.\frac{\partial\log\left(\x\right)}{\partial\x}\right|_{\x=\left(T_{a}^{b}\cdot\left(T_{a}^{\check{b}}\right)\right)}\cdot\frac{\partial}{\partial T_{a}^{b}}\left(\check{T_{a}^{b}}\cdot\left(T_{a}^{b}\right)^{-1}\right) & =A\cdot B^{\check{b}}\\
\frac{\partial}{\partial T_{a}^{b}}\dd_{\check{b}}^{b} & =\left.\frac{\partial\log\left(\x\right)}{\partial\x}\right|_{\x=\left(T_{a}^{b}\cdot\left(T_{a}^{\check{b}}\right)\right)}\cdot\frac{\partial}{\partial T_{a}^{b}}\left(T_{a}^{b}\cdot\left(\check{T_{a}^{b}}\right)^{-1}\right) & =A\cdot B^{b}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
The expression for 
\begin_inset Formula $A$
\end_inset

 is in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:lie_identities_group_vector-se3"
plural "false"
caps "false"
noprefix "false"

\end_inset

, and it's the same for both parameterizations.
 However, we are left with the two 
\begin_inset Formula $B$
\end_inset

 expressions.
 In the first case, we have to go through our desired state to get to the
 current state.
 This isn't too bad, we just look at Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:lie_identities_group_operations"
plural "false"
caps "false"
noprefix "false"

\end_inset

 to get (using the left Jacobian):
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
B^{\check{b}} & =\frac{\partial}{\partial T_{a}^{b}}\left(\check{T_{a}^{b}}\cdot\left(T_{a}^{b}\right)^{-1}\right)\\
 & =-\Ad\left(\check{T_{a}^{b}}\cdot\left(T_{a}^{b}\right)^{-1}\right)
\end{align*}

\end_inset

for the first cast, and
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
B^{b} & =\frac{\partial}{\partial T_{a}^{b}}\left(T_{a}^{b}\cdot\left(\check{T_{a}^{b}}\right)^{-1}\right)\\
 & =I\in\R^{6\times6}.
\end{align*}

\end_inset

for the second.
 Having a closed form expression for the Adjoint makes computing these kinds
 of expressions very straight-forward.
 
\end_layout

\begin_layout Standard
Most modern forms of control and estimation rely heavily on quickly-computed
 Jacobians.
 With a table of Jacobians for exp, log, Ad and a few other Lie group expression
s, plus the Matrix Cookbook 
\begin_inset CommandInset citation
LatexCommand cite
key "Petersen2012"
literal "false"

\end_inset

, it's pretty easy to chain-rule out even the hairiest Jacobians pretty
 quickly to get analytical expressions.
 Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Tables"
plural "false"
caps "false"
noprefix "false"

\end_inset

 contains most of these Jacobians for easy reference.
\end_layout

\begin_layout Subsection
Adjoint for 
\begin_inset Formula $\SO\left(3\right)$
\end_inset


\end_layout

\begin_layout Standard
For all four Lie groups, we can derive the Adjoint by finding the closed-form
 expression of Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:adjoint_start"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

 is quite easy:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\Ad\left(R\right) & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}R\cdot\exp\left(J_{1}\varepsilon\right)\cdot R^{-1} & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}R\cdot\left(I+\skew{\e_{1}\epsilon}+\cdots\right)\cdot R^{-1} & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}R\cdot R^{-1}+R\cdot\skew{\e_{1}\epsilon}\cdot R^{-1} & \cdots\end{bmatrix}\\
 & =\begin{bmatrix}R\cdot\skew{\e_{1}}\cdot R^{-1} & \cdots\end{bmatrix} & \grey{R\cdot R^{-1}=I}\\
 & =\begin{bmatrix}\skew{R\e_{1}} & \skew{R\e_{2}} & \skew{R\e_{3}}\end{bmatrix} & \grey{\textrm{(Eq. \ref{eq:skew_trick_2})}}\\
 & =R
\end{align*}

\end_inset

We see here that 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

 is 
\emph on
self-adjoint
\emph default
, and it makes sense why.
 Consider an 
\begin_inset Formula $\SO\left(3\right)$
\end_inset

 version of Eq.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:adjoint_show"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Rotating the vector is the natural way to transform 
\begin_inset Formula $\dd$
\end_inset

 from the 
\begin_inset Formula $a$
\end_inset

 frame to the 
\begin_inset Formula $b$
\end_inset

 frame.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\Ad\left(R\right)=R}
\]

\end_inset


\end_layout

\begin_layout Subsection
Adjoint for Unit Quaternions
\end_layout

\begin_layout Standard
Remember, the Adjoint action is given by 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\Ad=\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\q\cdot\exp\left(J_{1}\varepsilon\right)\cdot\q^{-1}\right) & \cdots\end{bmatrix}.
\]

\end_inset

In the case of unit quaternions, we can see that they too, are self-adjoint.
 To compute the adjoint of a quaternion, all we need to do is pre- and post-mult
iply a pure quaternion of the lie algebra member by the quaternion.
 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\Ad\left(\q\right)=\q\cdot\dd\cdot\q^{-1}.
\]

\end_inset

However, sometimes we might want the matrix form of the adjoint.
 This can be computed as follows:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\q\cdot\begin{pmatrix}0\\
\e_{1}\sin\left(\frac{\varepsilon}{2}\right)
\end{pmatrix}\cdot\q^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\begin{pmatrix}0\\
\frac{R^{\top}\e_{1}\varepsilon}{2}
\end{pmatrix} & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}R^{\top}\e_{1}\varepsilon & R^{\top}\e_{2}\varepsilon & R^{\top}\e_{3}\varepsilon\end{bmatrix}\\
 & =R^{\top}.
\end{align*}

\end_inset

You could probably come up with this only just from intuition as well.
 If you remember that quaternions and rotation matrices share a Lie Algebra,
 and that the order of concatenation is backwards, then 
\begin_inset Formula $R^{\top}$
\end_inset

 is the logical choice.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\Ad\left(\q\right)=R^{\top}\left(\q\right)}
\]

\end_inset


\end_layout

\begin_layout Subsection
Adjoint for 
\begin_inset Formula $\SE\left(3\right)$
\end_inset


\end_layout

\begin_layout Standard
Computing this adjoint is more complicated than pure rotation.
 Unfortunately, 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

 isn't self-adjoint,
\begin_inset Foot
status open

\begin_layout Plain Layout
This should be pretty obvious, seeing as 
\begin_inset Formula $\se\left(3\right)$
\end_inset

 is 6-dimensional while 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

 is a group of 
\begin_inset Formula $4\times4$
\end_inset

 matrices.
\end_layout

\end_inset

 so the limit gets a little more hairy.
 We have two main blocks: the first three generators are the rotation generators
, while the last three are the translation generators.
 Let's consider these separately.
 First, the rotation blocks
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\Ad_{1-3} & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(T\cdot\exp\left(J_{1}\varepsilon\right)\cdot T^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(T\cdot\begin{bmatrix}\skew{\e_{1}\varepsilon} & 0\\
0 & 0
\end{bmatrix}\cdot T^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}R & \t\\
0 & 1
\end{bmatrix}\cdot\begin{bmatrix}\skew{\e_{1}\varepsilon} & 0\\
0 & 0
\end{bmatrix}\cdot\begin{bmatrix}R^{\top} & -R^{\top}\t\\
0 & 1
\end{bmatrix}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}R\skew{\e_{1}\varepsilon} & 0\\
0 & 0
\end{bmatrix}\cdot\begin{bmatrix}R^{\top} & -R^{\top}\t\\
0 & 1
\end{bmatrix}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}R\skew{\e_{1}\varepsilon}R^{\top} & -R\skew{\e_{1}\varepsilon}R^{\top}\t\\
0 & 0
\end{bmatrix}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\skew{R\e_{1}\varepsilon} & -\skew{R\e_{1}\varepsilon}\t\\
0 & 0
\end{bmatrix}\right) & \cdots\end{bmatrix} & \grey{\textrm{(Eq. \ref{eq:skew_trick_2})}}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\skew{R\e_{1}\varepsilon} & \skew{\t}R\e_{1}\varepsilon\\
0 & 0
\end{bmatrix}\right) & \cdots\end{bmatrix} & \grey{\textrm{(Eq. \ref{eq:skew_trick_1})}}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}R\varepsilon\\
\skew{\t}R\varepsilon
\end{bmatrix}\\
 & =\begin{bmatrix}R\\
\skew{\t}R
\end{bmatrix}.
\end{align*}

\end_inset

Now for the translation blocks
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\Ad_{4-6} & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(T\cdot\exp\left(J_{4}\varepsilon\right)\cdot T^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}R & \t\\
0 & 1
\end{bmatrix}\cdot\begin{bmatrix}0 & \e_{1}\varepsilon\\
0 & 0
\end{bmatrix}\cdot\begin{bmatrix}R^{\top} & -R^{\top}\t\\
0 & 1
\end{bmatrix}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}0 & R\e_{1}\varepsilon\\
0 & 0
\end{bmatrix}\cdot\begin{bmatrix}R^{\top} & -R^{\top}\t\\
0 & 1
\end{bmatrix}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}0 & R\e_{1}\varepsilon\\
0 & 0
\end{bmatrix}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}0 & 0 & 0\\
R\e_{1}\varepsilon & R\e_{2}\varepsilon & R\e_{3}\varepsilon
\end{bmatrix}\\
 & =\begin{bmatrix}0\\
R
\end{bmatrix}.
\end{align*}

\end_inset

We now concatenate these blocks to get the final Adjoint matrix:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\Ad\left(T\right)=\begin{pmatrix}R & 0\\
\skew{\t}R & R
\end{pmatrix}.}
\]

\end_inset

Note that some literature
\begin_inset CommandInset citation
LatexCommand citet
key "Drummond2014,Ethan2019"
literal "false"

\end_inset

 derives this block-transposed.
 All that means is that they define generators 1-3 as the translation generators
 and 4-6 as the rotation generators.
\end_layout

\begin_layout Standard
Before moving on, let's take a second to develop a little bit of intuition
 regarding the adjoint when it comes to rigid transforms.
 Consider a rod rotating about a fixed origin, as shown in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:rotating_adjoint"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Let us say we have the linear and angular velocity of coordinate frame
 
\begin_inset Formula $a$
\end_inset

, but we want the velocity of coordinate frame 
\begin_inset Formula $b$
\end_inset

.
 Because the coordinate frames are fixed by some rigid transform, any angular
 rate value of 
\begin_inset Formula $a$
\end_inset

 is the same for 
\begin_inset Formula $b$
\end_inset

, only rotated.
 However, to compute the linear velocity of coordinate frame 
\begin_inset Formula $b$
\end_inset

, we must account for the 
\begin_inset Quotes eld
\end_inset

lever arm
\begin_inset Quotes erd
\end_inset

 and the angular rate.
 This is what is going on in the bottom-left corner of the Adjoint in 
\begin_inset Formula $\SE\left(3\right).$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/rotating_bar.svg
	width 30col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Illustration of a rotating rigid body with two coordinate frames.
 The Adjoint of 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

 will convert 
\begin_inset Formula $\w$
\end_inset

 and 
\begin_inset Formula $\v$
\end_inset

 from frame 
\begin_inset Formula $a$
\end_inset

 to frame 
\begin_inset Formula $b$
\end_inset

, and account for the change in translation.
 
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:rotating_adjoint"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Adjoint of Dual Quaternions
\end_layout

\begin_layout Standard
As with unit quaternions, dual unit quaternions are also self-adjoint:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\Ad\left(\qq\right)=\qq\cdot\exp\left(\d\right)\cdot\qq^{-1}.
\]

\end_inset

We have no problem dealing with six-vectors here (the problem with 
\begin_inset Formula $\SE\left(3\right),$
\end_inset

which led us to compute that hairy limit).
 However, just like unit quaternions, we can compute the matrix form of
 the Adjoint using the limit expression.
 Again, let's split up the generators into two groups to help keep things
 a little more concise
\end_layout

\begin_layout Standard

\size small
\begin_inset Formula 
\begin{align*}
\Ad_{1-3} & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\qq\cdot\exp\left(J_{1}\varepsilon\right)\cdot\qq^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\\
\epsilon\q_{d}
\end{bmatrix}\cdot\begin{bmatrix}\begin{pmatrix}0\\
\e_{1}\sin\left(\frac{\varepsilon}{2}\right)
\end{pmatrix}\\
0\epsilon
\end{bmatrix}\cdot\begin{bmatrix}\q_{r}\\
\epsilon\q_{d}
\end{bmatrix}^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\\
\epsilon\q_{d}
\end{bmatrix}\cdot\begin{bmatrix}\e_{1}\varepsilon\\
0\epsilon
\end{bmatrix}\cdot\begin{bmatrix}\q_{r}\\
\epsilon\q_{d}
\end{bmatrix}^{-1}\right) & \cdots\end{bmatrix} & \grey{\sin\varepsilon\to\varepsilon}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\\
\epsilon\left(\e_{1}^{\wedge}\varepsilon\cdot\q_{d}\right)
\end{bmatrix}\cdot\begin{bmatrix}\q_{r}\\
\epsilon\q_{d}
\end{bmatrix}^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{r}^{-1}\\
\epsilon\left(\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{d}^{-1}+\q_{r}^{-1}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{d}\right)
\end{bmatrix}\right) & \cdots\end{bmatrix} & \grey{\e_{1}^{\wedge}=\begin{pmatrix}0\\
\e_{1}
\end{pmatrix}}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{r}^{-1}\\
\epsilon\left(\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\begin{pmatrix}\frac{1}{2}\t^{\wedge}\cdot\q_{r}\end{pmatrix}^{-1}+\q_{r}^{-1}\cdot\e_{1}^{\wedge}\varepsilon\cdot\frac{1}{2}\t^{\wedge}\cdot\q_{r}\right)
\end{bmatrix}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{r}^{-1}\\
\frac{1}{2}\epsilon\left(\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{r}^{-1}\cdot\left(-\t^{\wedge}\right)+\q_{r}^{-1}\cdot\e_{1}^{\wedge}\varepsilon\cdot\t^{\wedge}\cdot\q_{r}\right)
\end{bmatrix}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{r}^{-1}\\
\frac{1}{2}\epsilon\left(-\skew{R^{\top}\e_{1}\varepsilon}\t+R\skew{\e_{1}\varepsilon}\t\right)
\end{bmatrix}\right) & \cdots\end{bmatrix} & \grey{\textrm{(Eq. \ref{eq:quat_mult_matrix})}}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{r}^{-1}\\
\frac{1}{2}\epsilon\left(-R^{\top}\skew{\e_{1}\varepsilon}R\t+R\skew{\e_{1}\varepsilon}\t\right)
\end{bmatrix}\right) & \cdots\end{bmatrix} & \grey{\textrm{(Eq. \ref{eq:skew_trick_2})}}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{r}^{-1}\\
\frac{1}{2}\epsilon\left(R^{\top}\skew{R\t}\e_{1}\varepsilon-R\skew{\t}\e_{1}\varepsilon\right)
\end{bmatrix}\right) & \cdots\end{bmatrix} & \grey{\textrm{(Eq. \ref{eq:skew_trick_1})}}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\cdot\e_{1}^{\wedge}\varepsilon\cdot\q_{r}^{-1}\\
\frac{1}{2}\epsilon\left(\skew{\t}R^{\top}\e_{1}\varepsilon-R\skew{\t}\e_{1}\varepsilon\right)
\end{bmatrix}\right) & \cdots\end{bmatrix} & \grey{\textrm{(Eq. \ref{eq:skew_trick_1})}}\\
 & =\begin{bmatrix}R^{\top}\\
\skew{\t}R^{\top}
\end{bmatrix}.
\end{align*}

\end_inset

Whew! Luckily, the translation generators are much easier:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
\Ad_{4-6} & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\qq\cdot\exp\left(J_{1}\varepsilon\right)\cdot\qq^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}\q_{r}\\
\epsilon\q_{d}
\end{bmatrix}\cdot\begin{bmatrix}0\\
\e_{1}\epsilon
\end{bmatrix}\cdot\begin{bmatrix}\q_{r}\\
\epsilon\q_{d}
\end{bmatrix}^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\left(\begin{bmatrix}0\\
\epsilon\left(\q_{r}\cdot\e_{q}\varepsilon\right)
\end{bmatrix}\cdot\begin{bmatrix}\q_{r}\\
\epsilon\q_{d}
\end{bmatrix}^{-1}\right) & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\begin{bmatrix}0\\
\epsilon\left(\q_{r}\cdot\e_{q}\varepsilon\cdot\q_{r}^{-1}\right)
\end{bmatrix} & \cdots\end{bmatrix}\\
 & =\lim_{\varepsilon\to0}\frac{1}{\varepsilon}\begin{bmatrix}\log\begin{bmatrix}0\\
\epsilon\left(R^{\top}\e_{1}\varepsilon\right)
\end{bmatrix} & \cdots\end{bmatrix}\\
 & =R^{\top}.
\end{align*}

\end_inset

Finally, we can write the full Adjoint for dual quaternions as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\boxed{\Ad\left(\qq\right)=\begin{pmatrix}R^{\top} & 0\\
\skew{\t}R^{\top} & R^{\top}
\end{pmatrix}},
\]

\end_inset

which, unsurprisingly, is the same as the Adjoint of 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

, except with all the rotations transposed (due to the reverse order of
 quaternions rotation with respect to 
\begin_inset Formula $\SO\left(3\right).$
\end_inset

) Note that this is also the matrix inverse of the Adjoint of 
\begin_inset Formula $\SE\left(3\right)$
\end_inset

.
 
\end_layout

\begin_layout Standard
Now that we have each of the Adjoints, we can use the tables in Appendix
 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Tables"
plural "false"
caps "false"
noprefix "false"

\end_inset

 to find Jacobians for almost any arbitrary expression involving Lie groups!
\end_layout

\begin_layout Section
Left vs Right Jacobians
\end_layout

\begin_layout Standard
For now, just read 
\begin_inset CommandInset citation
LatexCommand cite
key "Sola2019"
literal "false"

\end_inset

.
 They have a great discussion on this topic.
 
\end_layout

\begin_layout Standard
TL;DR: Most of the time, I end up using the left Jacobian.
 Depending on how you define error, however, you may want to use the right
 Jacobian.
 If things are still hazy after reading Sola, write unit tests of your implement
ations and make sure everything is self-consistent.
\end_layout

\begin_layout Section
\start_of_appendix
Useful Tables
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:Tables"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Common dual number formulae
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:dual_trig_functions"

\end_inset


\begin_inset Box ovalbox
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
\align center
\begin_inset Formula 
\begin{align*}
f\left(r+d\epsilon\right) & =f\left(r\right)+\epsilon d\left(f^{\prime}\left(r\right)\right)\\
\cos\left(r+d\epsilon\right) & =\cos r-\epsilon d\sin r\\
\sin\left(r+d\epsilon\right) & =\sin r+\epsilon d\cos r\\
\arctan\left(r+d\epsilon\right) & =\arctan r+\epsilon\frac{d}{r^{2}+1}\\
\left(r+d\epsilon\right)^{2} & =r^{2}+\epsilon2rd\\
\sqrt{r+d\epsilon} & =\sqrt{r}+\epsilon\frac{d}{2\sqrt{r}}
\end{align*}

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Taylor series expansions
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:taylor_series"

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Box ovalbox
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
\begin_inset Formula 
\begin{align*}
\sin\left(\theta\right) & =\theta-\frac{1}{3!}\theta^{3}+\frac{1}{5!}\theta^{5}\cdots\\
\cos\left(\theta\right) & =1-\frac{1}{2}\theta^{2}+\frac{1}{4!}\theta^{4}\cdots\\
\cos\left(\frac{\theta}{2}\right) & =1-\frac{1}{8}\theta^{2}+\frac{1}{46080}\theta^{4}\cdots\\
\frac{\sin\left(\theta\right)}{\theta} & =1-\frac{1}{3!}\theta^{2}+\frac{1}{5!}\theta^{4}\cdots\\
\frac{\sin\left(\frac{\theta}{2}\right)}{\theta} & =\frac{1}{2}-\frac{1}{48}\theta^{2}+\frac{1}{3840}\theta^{4}+\cdots\\
\frac{\theta}{\sin\left(\theta\right)} & =1+\frac{1}{3!}\theta^{2}+\frac{7}{360}\theta^{4}\cdots\\
\frac{1-\cos\left(\theta\right)}{\theta^{2}} & =\frac{1}{2}-\frac{1}{24}\theta^{2}+\frac{1}{720}\theta^{4}\cdots\\
\frac{\cos\theta-\frac{\sin\theta}{\theta}}{\theta^{2}} & =-\frac{1}{3}+\frac{1}{30}\theta^{2}-\frac{1}{840}\theta^{4}\cdots\\
\frac{\frac{1}{2}\cos\frac{\theta}{2}-\frac{\sin\frac{\theta}{2}}{\theta}}{\theta^{2}} & =-\frac{1}{24}+\frac{1}{960}\theta^{2}-\frac{1}{107520}\theta^{4}\cdots\\
\frac{\tan^{-1}\left(\frac{\theta}{y}\right)}{\theta} & =\frac{1}{y}-\frac{1}{3y^{3}}\theta^{2}+\frac{1}{5y^{5}}\theta^{4}
\end{align*}

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Group-Group Jacobians
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:lie_identities_group_operations"

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Box ovalbox
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="bottom" width="27line%">
<column alignment="center" valignment="bottom" width="27line%">
<column alignment="center" valignment="bottom" width="27line%">
<row topspace="0.25cm">
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Expression
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Left Jacobian
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Right Jacobian
\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}\y\cdot\x$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\Ad\left(\y\right)^{-1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $I$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}\x^{-1}\cdot\y$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $-\Ad\left(\x\right)^{-1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $-\Ad\left(\x^{-1}\cdot\y\right)^{-1}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}\y\cdot\x^{-1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $-\Ad\left(\y\cdot\x^{-1}\right)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $-\Ad\left(\x\right)$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}\x\cdot\y$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $I$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\Ad\left(\y\right)^{-1}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\size small

\begin_inset Formula 
\begin{align*}
\x,\y & \in G
\end{align*}

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Useful Jacobians for 
\begin_inset Formula $\SO\left(3\right)$
\end_inset


\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:lie_identities_group_vector_s03"

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Box ovalbox
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="bottom" width="27line%">
<column alignment="center" valignment="bottom" width="27line%">
<column alignment="center" valignment="bottom" width="27line%">
<row topspace="0.25cm">
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Expression
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Left Jacobian
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Right Jacobian
\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}R\cdot\v$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $-\skew{R\cdot\v}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $-R\cdot\skew{\v}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}R^{\top}\cdot\v$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R^{\top}\skew{\v}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\skew{R^{\top}\cdot\v}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\w}\exp\left(\skew{\w}\right)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $aI+b\skew{\w}+c\w\w^{\top}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $aI-b\skew{\w}+c\w\w^{\top}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial R}\log\left(R\right)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $I-\frac{1}{2}\skew{\dd}+e\skew{\dd}^{2}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $I+\frac{1}{2}\skew{\dd}+e\skew{\dd}^{2}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $R\in\SO\left(3\right),\quad\v,\w\in\mathbb{R}^{3}\quad\dd=\log\left(R\right)\quad\theta=\norm{\dd}$
\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $a=\frac{\sin\theta}{\theta}\quad b=\frac{1-\cos\left(\theta\right)}{\theta^{2}}\quad c=\frac{1-a}{\theta^{2}}\quad e=\frac{b-2c}{2a}$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Useful Jacobians Jacobians for 
\begin_inset Formula $\SE\left(3\right)$
\end_inset


\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:lie_identities_group_vector-se3"

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Box ovalbox
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="bottom" width="17line%">
<column alignment="center" valignment="bottom" width="32line%">
<column alignment="center" valignment="bottom" width="32line%">
<row topspace="0.25cm">
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Expression
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Left Jacobian
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Right Jacobian
\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}T\cdot\v$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}-\skew{R\cdot\v+\t} & I\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}-R\cdot\skew{\v} & R\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}T^{-1}\cdot\v$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}R^{\top}\cdot\skew{\v} & -R^{\top}\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}\skew{R^{\top}\cdot\left(\v-\t\right)} & -I\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\boldsymbol{\xi}}\exp\left(\boldsymbol{\xi}^{\wedge}\right)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}A & 0\\
D & A
\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}A^{\top} & 0\\
D^{\top} & A^{\top}
\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial T}\log\left(T\right)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}E & 0\\
-E\cdot D\cdot E & E
\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}E^{\top} & 0\\
-\left(E\cdot D\cdot E\right)^{\top} & E^{\top}
\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $T\in\SE\left(3\right),\quad\v\in\mathbb{R}^{3},\quad\boldsymbol{\xi}=\begin{pmatrix}\w & \v\end{pmatrix}^{\top}\in\se\left(3\right)$
\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $a=\frac{\sin\theta}{\theta}\quad b=\frac{1-\cos\left(\theta\right)}{\theta^{2}}\quad c=\frac{1-a}{\theta^{2}}\quad d=\w^{\top}\v\quad A=\frac{\partial}{\partial\w}\exp\left(\skew{\w}\right)$
\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $B=\w\v^{\top}+\v\w^{\top}\quad C=\left(c-b\right)I+\left(\frac{a-2b}{\theta^{2}}\right)\skew{\w}+\left(\frac{b-3c}{\theta^{2}}\right)\w\w^{\top}$
\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $D=b\skew{\v}+cB+dC\quad E=\frac{\partial}{\partial R}\log\left(R\right)$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Useful Jacobians for 
\begin_inset Formula $\S^{3}$
\end_inset


\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:lie_identities_s3"

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Box ovalbox
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="bottom" width="27line%">
<column alignment="center" valignment="bottom" width="27line%">
<column alignment="center" valignment="bottom" width="27line%">
<row topspace="0.25cm">
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Expression
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Left Jacobian
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Right Jacobian
\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}\q^{-1}\cdot\v^{\wedge}\cdot\q$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R\left(\q\right)^{\top}\cdot\skew{\v}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\skew{R\left(\q\right)^{\top}\cdot\v}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}\q\cdot\v^{\wedge}\cdot\q^{-1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $-\skew{R\left(\q\right)}\cdot\v$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $-R\left(\q\right)\cdot\skew{\v}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\w}\exp\left(\w^{\wedge}\right)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $aI+b\skew{\w}+c\w\w^{\top}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $aI-b\skew{\w}+c\w\w^{\top}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\q}\log\left(\q\right)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $I-\frac{1}{2}\skew{\dd}+e\skew{\dd}^{2}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $I+\frac{1}{2}\skew{\dd}+e\skew{\dd}^{2}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $\q\in\S^{3}\quad\v,\w\in\mathfrak{s}^{3}\quad\dd=\log\left(\q\right)\quad\theta=\norm{\dd}$
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Formula $a=\frac{\sin\theta}{\theta}\quad b=\frac{1-\cos\left(\theta\right)}{\theta^{2}}\quad c=\frac{1-a}{\theta^{2}}\quad e=\frac{b-2c}{2a}$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Useful Jacobians for 
\begin_inset Formula $\mathbb{D}\S^{3}$
\end_inset


\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:lie_identities_ds3"

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Box ovalbox
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="bottom" width="19line%">
<column alignment="center" valignment="bottom" width="31line%">
<column alignment="center" valignment="bottom" width="31line%">
<row topspace="0.25cm">
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Expression
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Left Jacobian
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Right Jacobian
\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}\qq^{-1}\cdot\v^{\wedge}\cdot\qq$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}R\left(\q_{r}\right)\skew{\v} & R\left(\q\right)\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}\skew{R\left(\q_{r}\right)\left(\v-\t\right)} & -I\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\x}\qq\cdot\v^{\wedge}\cdot\qq^{-1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}-\skew{R\left(\q_{r}\right)^{\top}}\v+\t & I\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}R\left(\q_{r}\right)^{\top}\skew{-\v} & R\left(\q_{r}\right)^{\top}\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial\boldsymbol{\xi}}\exp\left(\boldsymbol{\xi^{\wedge}}\right)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}A & 0\\
D & A
\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}A^{\top} & 0\\
D^{\top} & A^{\top}
\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row topspace="0.15cm" bottomspace="0.15cm">
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\frac{\partial}{\partial T}\log\left(\qq\right)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}E & 0\\
-E\cdot D\cdot E & E
\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\begin{pmatrix}E^{\top} & 0\\
\left(-E\cdot D\cdot E\right)^{\top} & E^{\top}
\end{pmatrix}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $\qq\in\mathbb{D}\S^{3},\quad\boldsymbol{\xi}=\begin{pmatrix}\w & \v\end{pmatrix}^{\top}\in\mathfrak{ds}^{3}$
\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $a=\frac{\sin\theta}{\theta}\quad b=\frac{1-\cos\left(\theta\right)}{\theta^{2}}\quad c=\frac{1-a}{\theta^{2}}\quad d=\w^{\top}\v\quad A=\frac{\partial}{\partial\w}\exp\left(\skew{\w}\right)$
\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $B=\w\v^{\top}+\v\w^{\top}\quad C=\left(c-b\right)I+\left(\frac{a-2b}{\theta^{2}}\right)\skew{\w}+\left(\frac{b-3c}{\theta^{2}}\right)\w\w^{\top}$
\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Formula $D=b\skew{\v}+cB+dC\quad E=\frac{\partial}{\partial R}\log\left(R\right)$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
btprint "btPrintCited"
bibfiles "library"
options "plain"

\end_inset


\end_layout

\end_body
\end_document
